require=function e(t,i,n){function a(o,s){if(!i[o]){if(!t[o]){var r="function"==typeof require&&require;if(!s&&r)return r(o,!0);if(c)return c(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return a(i||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var c="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({Alert:[function(e,t,i){"use strict";cc._RF.push(t,"588fbn0WshPn7r+mDdfxrLe","Alert"),cc.Class({extends:cc.Component,properties:{_btnOK:null,_btnCancle:null,_content:null,_closeBtn:null,_onok:null,_oncancel:null},onLoad:function(){this._btnOK=this.node.getChildByName("btnEnable"),this._btnCancle=this.node.getChildByName("btnCancel"),this._content=this.node.getChildByName("content").getComponent(cc.Label),this._closeBtn=this.node.getChildByName("clostBtn")},OnOkClick:function(e){this._onok&&this._onok(),this.node.removeFromParent()},OnCancleClick:function(e){this._oncancel&&this._oncancel(),this.node.removeFromParent()},OnCloseClick:function(e){this._onok&&this._onok(),this.node.removeFromParent()},show:function(e,t,i){var n=this;this._onok=t,this._content.string=e+"",console.log("showcancelbtn status "+i),1==i||(n._btnCancle.active=!1,n._btnOK.x=320)},show2:function(e,t,i,n,a,c){var o=this;this._onok=t,this._oncancel=i,this._content.string=e+"",console.log("showcancelbtn status "+n),""!=a&&(this._btnOK.getChildByName("Label").getComponent(cc.Label).string=a),""!=c&&(this._btnCancle.getChildByName("Label").getComponent(cc.Label).string=c),1==n?o._closeBtn.active=!1:(o._btnCancle.active=!1,o._btnOK.x=320)}}),cc._RF.pop()},{}],AudioMgr:[function(e,t,i){"use strict";cc._RF.push(t,"04cf8aGJKRKfapqzgpY4b6R","AudioMgr"),cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},init:function(){this.resetLocalAudio(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},resetLocalAudio:function(){var e=cc.sys.localStorage.getItem("bgmVolume");null!=e?this.bgmVolume=parseFloat(e):(this.bgmVolume=parseFloat(.2),this.setBGMVolume(.3)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))?this.sfxVolume=parseFloat(e):(this.sfxVolume=parseFloat(.9),this.setSFXVolume(1))},getUrl:function(e){return cc.url.raw("resources/sounds/"+e)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),this.bgmVolume!=e&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},playBGM:function(e){var t=this.getUrl(e);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmVolume>0&&(this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume))},playSFX:function(e){var t=this.getUrl(e);if(this.sfxVolume>0)cc.audioEngine.play(t,!1,this.sfxVolume)}}),cc._RF.pop()},{}],Card:[function(e,t,i){"use strict";cc._RF.push(t,"70df0jJ2IpMHaLSR+slL8kk","Card"),cc.Class({extends:cc.Component,properties:{card_pos:"",card_node:cc.Node,pokerPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this._posx=new Array(60,95,130,46,72,96,124,145,50,75,98,125,151),this._posy=new Array(120,125,120,78,82,85,81,73,35,39,42,38,30),this._rotation=new Array(-10,0,10,-25,-10,0,10,20,-25,-10,0,10,20)},ShowCurrentStatus:function(e){},ShowCardNormal:function(e){var t=this;t.card_node.removeAllChildren(),t.card_node.active=!0,t.card_node.setScale(1);var i=20,n=.32;0==e&&(i=20,n=.55);for(var a=0;a<5;a++){var c=cc.instantiate(t.pokerPrefab);c.setScale(n),t.card_node.addChild(c);var o=t.card_node.convertToNodeSpaceAR(cc.p(320,600));c.setPosition(o),c.setPosition(o.x,o.y);var s=cc.delayTime(.05+.05*a),r=cc.moveTo(.3,cc.p(a*i-30,-10));c.runAction(cc.sequence(s,r))}},ShowCardFinish:function(){var e=new cc.Node,t=e.addComponent(cc.Sprite);this.card_node.addChild(e),cc.loader.loadRes("niuniu/arrange_complete.png",cc.SpriteFrame,function(e,i){t.spriteFrame=i})},ShowSelfCardFinish:function(){var e=this;e.card_node.removeAllChildren(),e.card_node.active=!0;for(var t=0;t<5;t++){var i=cc.instantiate(e.pokerPrefab);i.setScale(.45),i.setPosition(-145,35),e.card_node.addChild(i),t>0&&i.runAction(cc.moveBy(.5,cc.p(75*t,0)))}var n=new cc.Node,a=n.addComponent(cc.Sprite);this.card_node.addChild(n),cc.loader.loadRes("niuniu/arrange_complete.png",cc.SpriteFrame,function(e,t){a.spriteFrame=t}),cc.vv.audioMgr.playSFX("effect/poker_deal.mp3")},hideCard:function(){this.card_node.active=!1},ShowCardResult:function(e,t,i){var n=this;n.card_node.removeAllChildren(),n.card_node.active=!0;var a=25,c=null;t>0&&(c=n.getNiuList(e,t));for(var o=0;o<5;o++){var s=cc.instantiate(n.pokerPrefab);s.setScale(.45),3==o&&(a=25),n.card_node.getPositionX()<0?null!==c?s.setPosition(-39,0):s.setPosition(-24,0):s.setPosition(-50,0),null!==c&&o>=3?s.runAction(cc.moveBy(.5,cc.p(o*a+20,0))):o>0&&s.runAction(cc.moveBy(.5,cc.p(o*a,0)));var r=e[o];null!==c&&(r=e[c[o]]),s.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[r.name],n.card_node.addChild(s)}n.card_node.setScale(.65),cc.vv.uitools.ShowAniNui(t,n.card_node)},ShowSeflCardResult:function(e,t,i){var n=this;n.card_node.removeAllChildren(),n.card_node.active=!0;var a=null;if(t>0&&(a=n.getNiuList(e,t)),6==cc.args.ext_json.playerNum)c=new Array(-2,48,98,148,198);else var c=new Array(-42,8,58,108,158);for(var o=new Array(-42,8,58,178,228),s=0;s<5;s++){var r=cc.instantiate(n.pokerPrefab);r.setScale(.61);var l=e[s];null!==a&&(l=e[a[s]]),r.setPosition(85*s-42,38),null!==a?r.runAction(cc.moveTo(.3,cc.p(o[s],38))):r.runAction(cc.moveTo(.3,cc.p(c[s],38))),r.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[l.name],n.card_node.addChild(r)}n.card_node.setScale(.85),cc.vv.uitools.ShowAniNui(t,n.card_node,1)},getNiuList:function(e,t){for(var i=new Array,n=0,a=0,c=0,o=0;o<3;o++)for(var s=o+1;s<5;s++)for(var r=s+1;r<5;r++)(e[o].value+e[s].value+e[r].value)%10==0&&(n=o,a=s,c=r);if(i.push(n),i.push(a),i.push(c),0==n&&0==a&&0==c)return null;for(var l=0;l<5;l++)l!==n&&l!==a&&l!==c&&i.push(l);return i}}),cc._RF.pop()},{}],ChatList:[function(e,t,i){"use strict";cc._RF.push(t,"0afcbw/czhNNpSSRqusDIpX","ChatList"),cc.Class({extends:cc.Component,properties:{chatVoices:{default:[],type:[cc.Node]},chatNode:cc.Node},onLoad:function(){var e=this;this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"玩游戏，请先进群 ",sound:"fix_msg_1.m4a"},this._quickChatInfo.item1={index:1,content:"群内游戏，切勿转发 ",sound:"fix_msg_2.m4a"},this._quickChatInfo.item2={index:2,content:"别磨蹭，快点打牌 ",sound:"fix_msg_3.m4a"},this._quickChatInfo.item3={index:3,content:"我出去叫人 ",sound:"fix_msg_4.m4a"},this._quickChatInfo.item4={index:4,content:"你的牌好靓哇 ",sound:"fix_msg_5.m4a"},this._quickChatInfo.item5={index:5,content:"我当年横扫澳门五条街 ",sound:"fix_msg_6.m4a"},this._quickChatInfo.item6={index:6,content:"算你牛逼 ",sound:"fix_msg_7.m4a"},this._quickChatInfo.item7={index:7,content:"别跟我抢庄 ",sound:"fix_msg_8.m4a"},this._quickChatInfo.item8={index:8,content:"输得裤衩都没了 ",sound:"fix_msg_9.m4a"},this._quickChatInfo.item9={index:9,content:"我给你们送温暖了 ",sound:"fix_msg_10.m4a"},this._quickChatInfo.item10={index:10,content:"谢谢老板 ",sound:"fix_msg_11.m4a"},this._quickChatInfo.item11={index:11,content:"别吹牛逼,有本事战到底 ",sound:"fix_msg_12.m4a"},cc.vv.netRoot.on("quick_chat_push",function(t){var t=t.detail,i=cc.vv.gameNetMgr.getSeatNodeByUid(t.sender),n=t.content,a=e.getQuickChatInfo(n);e.chatVoices[i].getComponent("Voice").chat(a.content),cc.vv.audioMgr.playSFX(a.sound)}),cc.vv.netRoot.on("emoji_push",function(t){var t=t.detail,i=cc.vv.gameNetMgr.getSeatNodeByUid(t.sender);e.chatVoices[i].getComponent("Voice").emoji(t.content)})},getQuickChatInfo:function(e){var t="item"+e;return this._quickChatInfo[t]},onShowChatClick:function(){cc.vv.uitools.ShowLayer("Chat",cc.director.getScene())},onShowChatClick2:function(){this.chatNode.active=!0}}),cc._RF.pop()},{}],Chat:[function(e,t,i){"use strict";cc._RF.push(t,"f1b09r15fhE0o4fMP0TknHv","Chat"),cc.Class({extends:cc.Component,properties:{_chatVoice:null,_chatRoot:null,_tabQuick:null,_tabEmoji:null,_tabQuickBtn:null,_tabEmojiBtn:null,_iptChat:null,_bg2:null,_quickChatInfo:null},onLoad:function(){var e=this;this.node.active=!0,this._chatVoice=cc.find("Canvas/seatinfo/chat_voice"),this._chatVoice.active=!0,this._tabQuickBtn=this.node.getChildByName("chatinfo").getChildByName("tabMsg"),this._tabEmojiBtn=this.node.getChildByName("chatinfo").getChildByName("tabEmoji"),cc.loader.loadRes("chat/tabMsg_2",cc.SpriteFrame,function(t,i){e._tabQuickBtn.getComponent(cc.Button).normalSprite=i}),this._tabQuick=this.node.getChildByName("chatinfo").getChildByName("msgScroll");for(var t=this._tabQuick.getChildByName("view").getChildByName("content").children,i=0;i<t.length;++i)t[i].name.indexOf("item")>=0&&cc.vv.uitools.addClickEvent(t[i],this.node,"Chat","onQuickChatItemClicked");cc.vv.netRoot.on("show_chat_click",function(t){e.node.active=!0}),this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"玩游戏，请先进群 ",sound:"fix_msg_1.m4a"},this._quickChatInfo.item1={index:1,content:"群内游戏，切勿转发 ",sound:"fix_msg_2.m4a"},this._quickChatInfo.item2={index:2,content:"别磨蹭，快点打牌 ",sound:"fix_msg_3.m4a"},this._quickChatInfo.item3={index:3,content:"我出去叫人 ",sound:"fix_msg_4.m4a"},this._quickChatInfo.item4={index:4,content:"你的牌好靓哇 ",sound:"fix_msg_5.m4a"},this._quickChatInfo.item5={index:5,content:"我当年横扫澳门五条街 ",sound:"fix_msg_6.m4a"},this._quickChatInfo.item6={index:6,content:"算你牛逼 ",sound:"fix_msg_7.m4a"},this._quickChatInfo.item7={index:7,content:"别跟我抢庄 ",sound:"fix_msg_8.m4a"},this._quickChatInfo.item8={index:8,content:"输得裤衩都没了 ",sound:"fix_msg_9.m4a"},this._quickChatInfo.item9={index:9,content:"我给你们送温暖了 ",sound:"fix_msg_10.m4a"},this._quickChatInfo.item10={index:10,content:"谢谢老板 ",sound:"fix_msg_11.m4a"},this._quickChatInfo.item11={index:11,content:"别吹牛逼,有本事战到底 ",sound:"fix_msg_12.m4a"}},getQuickChatInfo:function(e){var t="item"+e;return this._quickChatInfo[t]},onBtnChatClicked:function(){this.node.active=!this.node.active},onBgClicked:function(){this.node.active=!1},onTabClicked:function(e){var t=this;"tabMsg"==e.target.name?(this._tabQuick.active=!0,cc.loader.loadRes("chat/tabMsg_2",cc.SpriteFrame,function(e,i){t._tabQuickBtn.getComponent(cc.Button).normalSprite=i})):"tabEmoji"==e.target.name&&(this._tabQuick.active=!1,cc.loader.loadRes("chat/tabMsg_1",cc.SpriteFrame,function(e,i){t._tabQuickBtn.getComponent(cc.Button).normalSprite=i}))},onQuickChatItemClicked:function(e){this.node.active=!1;var t=this._quickChatInfo[e.target.name];cc.vv.socket.send("quick_chat",t.index)},onEmojiItemClicked:function(e){this.node.active=!1,cc.vv.socket.send("emoji",e.target.name)}}),cc._RF.pop()},{}],ClickAndRemove:[function(e,t,i){"use strict";cc._RF.push(t,"ca370iLC85FApr9J8W9GoPq","ClickAndRemove"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},ClickAndRemove:function(){this.node.removeFromParent()}}),cc._RF.pop()},{}],Control:[function(e,t,i){"use strict";cc._RF.push(t,"34d560o89VJfaMkN+jEe7ht","Control");cc.Class({extends:cc.Component,properties:{pokerPrefab:{default:null,type:cc.Prefab},cardList:cc.Node,qiangzhuan:{default:null,type:cc.Node},qiangzhuan2:{default:null,type:cc.Node},beishu:{default:null,type:cc.Node},selectniu:{default:null,type:cc.Node},_selectList:null,_pokerSpriteList:null,_pokerList:null},onLoad:function(){cc.vv.netRoot.on("qiangzhuang_done",function(e){if("standup"!=Grobal.status){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1;for(var t=["buqiang","qiang1","qiang2","qiang4"],i=0;i<4;i++)this.qiangzhuan2.getChildByName(t[i]).getComponent(cc.Button)._updateState()}},this),cc.vv.netRoot.on("dealbaserate_success",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.beishu.active=!1)},this),cc.vv.netRoot.on("dealpoker_done",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.selectniu.active=!1,this.node.active=!1)},this),cc.vv.netRoot.on("card_start_play",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.selectniu.active=!1,this.node.active=!1)},this),cc.vv.netRoot.on("shezhi_beishu",function(e){if("standup"!=Grobal.status&&"ready"!=Grobal.status){this.node.active=!0,1==Grobal.isGrab?(this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!1):(this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!0,this.selectniu.active=!1);for(var t=0;t<10;t++)null!==this.beishu.getChildByName("multiple"+t)&&this.beishu.getChildByName("multiple"+t).getComponent(cc.Button)._updateState()}},this),cc.vv.netRoot.on("game_restart_notice",function(e){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!1,this.cardList.removeAllChildren(),this._pokerSpriteList=new Array,this._selectList=new Array},this),this._selectList=new Array},reset:function(){var e=this;e.cardList.removeAllChildren(),e._pokerSpriteList=new Array,this._selectList=new Array,this.selectniu.active=!1},showQiangZhuan:function(){"see"==cc.args.ext_json.playType?(this.qiangzhuan.active=!1,this.qiangzhuan2.active=!0):"nor"==cc.args.ext_json.playType&&(this.qiangzhuan.active=!0,this.qiangzhuan2.active=!1),this.beishu.active=!1,this.selectniu.active=!1;var e=this.node.getChildByName("Time");void 0!=e&&null!=e&&e.removeFromParent()},showSelectNiu:function(){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!0},displayAndClickPokers:function(e){var t=this;t.cardList.removeAllChildren(),t._pokerSpriteList=new Array;this._pokerList=e;for(var i=0;i<5;i++){var n=cc.instantiate(t.pokerPrefab);n.status=2,n.setScale(.55);var a=e[i];n.setPosition(320,640);void 0!=a&&a.name;var c=new Array,o=cc.delayTime(.05+.05*i);if(6==cc.args.ext_json.playerNum)u=cc.moveTo(.3,cc.p(150+85*i,290));else u=cc.moveTo(.3,cc.p(220+85*i,180));var s=cc.scaleTo(.2,0,.55),r=cc.callFunc(function(e){null!==e.poker&&void 0!==e.poker&&(e.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[e.poker.name])}),l=cc.scaleTo(.2,.55,.55);if(c.push(o),c.push(u),c.push(s),c.push(r),c.push(l),this.cardList.addChild(n),t._pokerSpriteList.push(n),void 0!=a)if(n.poker=a,5==this._pokerList.length)if(i<3)n.runAction(cc.sequence(c));else{3==i?n.on(cc.Node.EventType.TOUCH_START,t.fourPokerClick,this):n.on(cc.Node.EventType.TOUCH_START,t.lastPokerClick,this);o=cc.delayTime(.05+.05*i);if(6==cc.args.ext_json.playerNum)u=cc.moveTo(.3,cc.p(150+85*i,290));else u=cc.moveTo(.3,cc.p(220+85*i,180));n.runAction(cc.sequence(o,u))}else n.runAction(cc.sequence(c));else{n.poker={};o=cc.delayTime(.05+.05*i);if(6==cc.args.ext_json.playerNum)u=cc.moveTo(.3,cc.p(150+85*i,290));else var u=cc.moveTo(.3,cc.p(220+85*i,180));n.runAction(cc.sequence(o,u)),3==i?n.on(cc.Node.EventType.TOUCH_START,t.fourPokerClick,this):n.on(cc.Node.EventType.TOUCH_START,t.lastPokerClick,this)}}cc.vv.audioMgr.playSFX("effect/poker_deal.mp3")},displayPokers:function(e,t){var i=this;i.cardList.removeAllChildren(),i._pokerSpriteList=new Array;this._pokerList=e;for(var n=0,a=0;a<5;a++){var c=e[a];if((s=cc.instantiate(i.pokerPrefab)).status=2,s.setScale(.55),void 0!=c){var o=c.name;0==t&&a==e.length-1?n=a:s.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[o],s.poker=c}else s.poker={},3==a?s.on(cc.Node.EventType.TOUCH_START,i.fourPokerClick,this):s.on(cc.Node.EventType.TOUCH_START,i.lastPokerClick,this);0==t?6==cc.args.ext_json.playerNum?s.setPosition(150+85*a,290):s.setPosition(220+85*a,180):(6==cc.args.ext_json.playerNum?s.setPosition(150,290):s.setPosition(200,160),a>0&&s.runAction(cc.moveBy(.5,cc.p(85*a,0)))),this.cardList.addChild(s),i._pokerSpriteList.push(s)}if(0!=n){var s=i._pokerSpriteList[n],r=new Array,l=cc.scaleTo(.2,0,.55),u=cc.callFunc(function(){s.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[o]}),d=cc.scaleTo(.2,.55,.55);r.push(l),r.push(u),r.push(d),s.runAction(cc.sequence(r))}cc.vv.audioMgr.playSFX("effect/poker_deal.mp3")},showPokerClick:function(e){var t=e.target,i=e.target.poker.name,n=new Array,a=cc.scaleTo(.2,0,.55),c=cc.callFunc(function(){t.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[i]}),o=cc.scaleTo(.2,.55,.55);n.push(a),n.push(c),n.push(o),t.runAction(cc.sequence(n)),cc.vv.audioMgr.playSFX("effect/poker_click.mp3")},lastPokerClick:function(){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(cc.vv.socket.send("showAllPokers"),cc.vv.audioMgr.playSFX("effect/poker_click.mp3"))},fourPokerClick:function(){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(cc.vv.socket.send("showFourPokers"),cc.vv.audioMgr.playSFX("effect/poker_click.mp3"))},_getCardForTouch:function(e){for(var t=this,i=t._pokerSpriteList.length-1;i>=0;i--){var n=t._pokerSpriteList[i],a=n.getBoundingBox();if(cc.rectContainsPoint(a,e))return n.isChiose=!0,n.opacity=185,this.ChangePokerState(),void cc.vv.audioMgr.playSFX("effect/btn_click.mp3")}},endCallback:function(e){if(!(null==this._pokerSpriteList||this._pokerSpriteList.length<5)){var t=e.getTouches()[0].getLocation();this._touchEnd=this.node.convertToNodeSpace(t),this._getCardForTouch(this._touchEnd)}},ChangePokerState:function(){for(var e=this,t=0;t<this._pokerSpriteList.length;t++){var i=this._pokerSpriteList[t];if(i.isChiose)if(i.isChiose=!1,i.opacity=255,1===i.status){i.status=2,i.y-=20;var n=-1;for(var a in e._selectList)e._selectList[a].name==i.poker.name&&(n=a);-1!=n&&e._selectList.splice(n,1)}else{if(e._selectList.length>=3)return;i.status=1,i.y+=20,e._selectList.push(i.poker)}}},onHasNiuClick:function(){cc.vv.socket.send("dealpoker","")},onQiangClick:function(e){var t=e.target.name;t=t.slice(-1);var i=parseInt(t);cc.vv.socket.send("qiangzhuang",{qiangzhuang:i})},onBuqiangClick:function(){cc.vv.socket.send("qiangzhuang",{qiangzhuang:0})},sendRateClick:function(e){var t=e.target.name.slice(8),i=[1,2,4,5,3,8];cc.vv.socket.send("dealbaserate",{rate:i[t]}),cc.vv.audioMgr.playSFX("effect/compare_bet.mp3")},checkNiu:function(){for(var e=this,t=0,i=0,n={},a={},c=0,o=0;o<e._pokerList.length;o++){var s=e._pokerList[o].value;t+=s,i+=s,0==s&&(i+=10),n[s]=void 0===n[s]?1:n[s]+1;var r=e._pokerList[o].num;a[r]=void 0===a[r]?1:a[r]+1,e._pokerList[o].num>10&&(c+=1)}var l=t%10,u=!1;for(var o in n){var d=(10+l-o)%10;if(n[d]&&(d==o&&n[d]>=2||d!=o&&n[d]>=1)){u=!0;break}}0==l&&(l=10),i<=10&&(l=13);for(var h in a)a[h]>=4&&(l=12);return 5==c&&(l=11),u?l:0}}),cc._RF.pop()},{}],GameFinishUI:[function(e,t,i){"use strict";cc._RF.push(t,"70609wjrC9M6asQUUB/YoGT","GameFinishUI"),cc.Class({extends:cc.Component,properties:{_args:null,info:cc.Node,share:cc.Button,follow:cc.Button,restart:cc.Button,close:cc.Button},onLoad:function(){this.info.active=!1},init:function(e){this._args=e,this.initView()},initView:function(){var e=this;this.info.active=!0;var t=e.info.getChildByName("roominfo");t.getChildByName("roomnum").getComponent(cc.Label).string=Grobal.roomNum,t.getChildByName("jushu").getComponent(cc.Label).string=Grobal.maxOfGame;for(var i=0;i<e._args.playerList.length;i++){var n=e._args.playerList[i];n.uid==Grobal.roomUser&&(t.getChildByName("roomuser").getComponent(cc.Label).string=n.userName)}var a=new Date(Grobal.startTime);t.getChildByName("starttime").getComponent(cc.Label).string=a.getMonth()+1+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes(),cc.vv.uitools.addClickEvent(e.follow,this.node,"GameFinishUI","onFollowClick"),cc.vv.uitools.addClickEvent(e.share,this.node,"GameFinishUI","onShareClick"),cc.vv.uitools.addClickEvent(e.restart,this.node,"GameFinishUI","onRestartClick"),cc.vv.uitools.addClickEvent(e.close,this.node,"GameFinishUI","onCloseClick"),e.ShowUserInfo()},ShowUserInfo:function(){for(var e=this,t=e.info.getChildByName("user"),i=e._args.playerList[0],n=0;n<e._args.playerList.length;n++){var a="user"+(n+1),c=t.getChildByName(a),o=e._args.playerList[n];c.getChildByName("username").getComponent(cc.Label).string=o.userName,c.getChildByName("id").getComponent(cc.Label).string=o.uid;var s=o.score;c.getChildByName("score").getComponent(cc.Label).string=s,c.active=!0,0==n?c.getChildByName("fangzhu").active=!0:i.score==s?c.getChildByName("fangzhu").active=!0:c.getChildByName("fangzhu").active=!1;var r=cc.vv.gameNetMgr.getSeatNodeByUid(o.uid);void 0!==cc.vv.gameNetMgr.seats[r]&&(c.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=cc.vv.gameNetMgr.seats[r].getUserIcon()),c.active=!0}},onRestartClick:function(){void 0==cc.args.ext&&(cc.args.ext="%7b%22guipai%22%3a%220%22%2c%22playType%22%3a%22nor%22%2c%22zhuangType%22%3a%22turn%22%2c%22niu7%22%3a%22bei1%22%7d"),void 0==cc.args.inningsNum&&(cc.args.inningsNum=4);var e={uid:Grobal.uid,userName:cc.args.userName,avatar:cc.args.avatar,roomNum:Grobal.roomNum,conf:cc.args.ext,inningsNum:cc.args.inningsNum};Grobal.status="standup",cc.vv.socket.send("startagain",e)},onCloseClick:function(){cc.sys.isNative?cc.director.loadScene("web"):window.location.href="/"},onFollowClick:function(){cc.sys.isNative?cc.director.loadScene("web"):cc.vv.uitools.ShowAlert(cc.director.getScene(),"关注",null,!0)},onShareClick:function(){cc.vv.hallSDK.goShare()}}),cc._RF.pop()},{}],GameNetMgr:[function(e,t,i){"use strict";cc._RF.push(t,"36540G872FH34jVagdvHhHN","GameNetMgr"),window.Grobal={uid:null,socket:null,roomNum:0,allPokers:new Array,selectPokers:new Array,isPass:!1,isReady:!1,status:"standup",isGrab:!1,seatIndex:-1,pokerSpriteFrameMap:null,dealInfo:null,roomUser:null,maxOfGame:0,numOfGame:0,startTime:null,roomStatus:"ready"},Grobal.reset=function(){Grobal.allPokers=new Array,Grobal.selectPokers=new Array,Grobal.isPass=!1,Grobal.isReady=!1,Grobal.status="standup",Grobal.dealInfo=null},cc.Class({extends:cc.Component,properties:{dataEventHandler:null,readyCount:0,playerList:new Array,seats:null,chatVoices:null},dispatchEvent:function(e,t){this.dataEventHandler&&this.dataEventHandler.emit(e,t)},connectGameServer:function(e){cc.vv.socket.ip=e.ip+":"+e.port;cc.vv.socket.connect(function(){},function(){}),Grobal.socket=cc.vv.socket},getLocalIndex:function(e){var t=1*cc.args.ext_json.playerNum;return(Grobal.seatIndex+t-e)%t},getSeatIndexByID:function(e){for(var t=0;t<this.playerList.length;++t){var i=this.playerList[t];if(null!==i&&i.uid==e)return t}return-1},getSeatNodeByUid:function(e){var t=-1;if(null==this.seats)return t;var i=cc.vv.gameNetMgr.getSeatIndexByID(e);return t=cc.vv.gameNetMgr.getLocalIndex(i)},getIsOpen:function(){for(var e=0;e<this.playerList.length;e++){var t=this.playerList[e];if("standup"!=t.status&&"ready"!=t.status)return!0}return!1},SetSeatInfo:function(){for(var e=0;e<this.playerList.length;++e){var t=this.playerList[e];null!==t&&t.uid==Grobal.uid&&(Grobal.seatIndex=e,Grobal.isReady=t.isReady,Grobal.status=t.status,Grobal.isGrab=t.isGrab)}},doPlayVoice:function(e){this.dispatchEvent("voice_msg_owners",e)},onRoomJoin:function(){var e=this;cc.vv.socket.addHandler("startagain_success",function(e){Grobal.status="standup",cc.vv.userMgr.enterRoom(Grobal.roomNum)}),cc.vv.socket.addHandler("exit_success",function(e){cc.LOCALHOST?window.location.href="/":cc.vv.hallSDK.goHall()}),cc.vv.socket.addHandler(Grobal.roomNum+"room_player_changed",function(e){for(var t="",i="",n=0;n<e.length;++n){var a=e[n];a.uid==Grobal.uid&&"ready"==a.status?t="你已准备":"ready"==a.status&&(i=""==i?"已准备的用户有:"+a.userName:i+"、"+a.userName)}""!=t&&""==i&&(i="还没有其他用户准备")}),cc.vv.socket.addHandler("room_dissolve",function(e){cc.vv.uitools.ShowAlert(cc.director.getScene(),"房间已经被房主解散了",function(){cc.LOCALHOST?window.location.href="/":cc.vv.hallSDK.goHall()},!1)}),cc.vv.socket.addHandler(Grobal.roomNum+"joinRoom",function(t){cc.vv.gameNetMgr.playerList=t.playerList,Grobal.maxOfGame=t.maxOfGame,Grobal.startTime=t.startTime,Grobal.roomUser=t.roomUser,Grobal.numOfGame=t.numOfGame,cc.vv.gameNetMgr.SetSeatInfo(),e.dispatchEvent("new_user_comes_push")}),cc.vv.socket.addHandler(Grobal.uid+"disconnect_server",function(e){cc.vv.userMgr.login()}),cc.vv.socket.addHandler(Grobal.roomNum+"startGame",function(e){Grobal.numOfGame=e}),cc.vv.socket.addHandler("checkPlayerStatus_success",function(t){cc.vv.gameNetMgr.playerList=t.playerList,e.dispatchEvent("checkPlayerStatus_success")}),cc.vv.socket.addHandler(Grobal.roomNum+"startGrab",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo()),e.dispatchEvent("start_qiang_zhuang")}),cc.vv.socket.addHandler(Grobal.roomNum+"selectrate",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo()),t&&1==t.isdeal_zhuan||e.dispatchEvent("shezhi_beishu")}),cc.vv.socket.addHandler(Grobal.roomNum+"play_state_change",function(t){e.dispatchEvent("play_state_change",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"kanpai_state_change",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","点击牌面看牌")}),cc.vv.socket.addHandler("show_tips",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message",e.info)}),cc.vv.socket.addHandler(Grobal.roomNum+"state_changed",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo(),e.dispatchEvent("user_state_changed"))}),cc.vv.socket.addHandler("voice_msg_push",function(t){e.dispatchEvent("voice_msg",t)}),cc.vv.socket.addHandler("quick_chat_push",function(t){e.dispatchEvent("quick_chat_push",t)}),cc.vv.socket.addHandler("emoji_push",function(t){e.dispatchEvent("emoji_push",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"deal_zhuang",function(t){t.zhuang==Grobal.uid?Grobal.isGrab=!0:Grobal.isGrab=!1,e.dispatchEvent("deal_zhuang",t)}),cc.vv.socket.addHandler(Grobal.uid+"dealingCards",function(t){Grobal.allPokers=t.pokerList,t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList),e.dispatchEvent("user_state_dealingCards",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message")}),cc.vv.socket.addHandler(Grobal.uid+"dealingTheFiveCards",function(t){Grobal.allPokers=t.pokerList,e.dispatchEvent("user_dealingTheFiveCards",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","请摊牌")}),cc.vv.socket.addHandler(Grobal.uid+"dealingTheFourCards",function(t){Grobal.allPokers=t.pokerList,e.dispatchEvent("user_dealingTheFourCards",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"play",function(t){e.dispatchEvent("user_state_play",t)}),cc.vv.socket.addHandler("playError",function(e){cc.vv.uitools.ShowAlert(cc.director.getScene(),e,function(){},!1)}),cc.vv.socket.addHandler(Grobal.roomNum+"gameFinish",function(t){Grobal.allPokers.splice(0,Grobal.allPokers.length),Grobal.selectPokers.splice(0,Grobal.selectPokers.length),e.dispatchEvent("single_game_finish",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"playSuccess",function(t){0!==t.error?Grobal.selectPokers=new Array:(null!=t.pokerPlayList&&void 0!=t.pokerPlayList&&(Grobal.selectPokers=t.pokerPlayList),e.dispatchEvent("card_playSuccess",t))}),cc.vv.socket.addHandler(Grobal.roomNum+"ready_done",function(t){e.dispatchEvent("ready_done")}),cc.vv.socket.addHandler("qiangzhuang_done",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="qianged",e.dispatchEvent("qiangzhuang_done"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","等待其他玩家选择"))}),cc.vv.socket.addHandler("dealbaserate_success",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="beishu",e.dispatchEvent("dealbaserate_success"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","等待闲家下注"))}),cc.vv.socket.addHandler("dealpoker_done",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="arranged",e.dispatchEvent("dealpoker_done"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","等待摊牌"))}),cc.vv.socket.addHandler(Grobal.roomNum+"game_score",function(t){Grobal.dealInfo=t,e.dispatchEvent("card_start_play",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message"),cc.vv.uitools.ClearTime(cc.director.getScene())}),cc.vv.socket.addHandler(Grobal.roomNum+"user_deal_poker_done",function(t){e.dispatchEvent("user_deal_poker_done",t)}),cc.vv.socket.addHandler(Grobal.uid+"_user_deal_poker_done",function(t){e.dispatchEvent("user_deal_poker_done",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"room_time_update",function(e){var t=e.roomStage+"_event",i=e.stagetime-e.servertime,n=e.lasttime-i;cc.vv.uitools.ShowTime("Time",cc.director.getScene(),{time:n,x:cc.director.getVisibleSize().width/2,y:600,eventName:t})})}}),cc._RF.pop()},{}],GamePlay:[function(e,t,i){"use strict";function n(e){if(null==e||"object"!=(void 0===e?"undefined":a(e)))return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){for(var t=[],i=0;i<e.length;++i)t[i]=n(e[i]);return t}if(e instanceof Object){t={};for(var c in e)e.hasOwnProperty(c)&&(t[c]=n(e[c]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}cc._RF.push(t,"a93b9MEo19ILbq5GnICT2T2","GamePlay");var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({extends:cc.Component,properties:{poker:{default:null,type:cc.Prefab},myNode:{default:null,type:cc.Node},readyBtn:{default:null,type:cc.Button},backPrefab:{default:null,type:cc.Prefab},_backPrefabPool:null,_clickTimeArray:null,_voiceMsgQueue:[],_lastPlayTime:null,_voice_btn:{default:null,type:cc.Button},_playingSeat:null},onLoad:function(){cc.view.setDesignResolutionSize(640,1024,0),this._backPrefabPool=new cc.NodePool,this._pokerSpriteFrameMap={},this._clickTimeArray=new Array;var e=this._pokerSpriteFrameMap,t=this;this.myNode.active=!0,this.readyBtn.node.on(cc.Node.EventType.TOUCH_START,this.readyCallBack,this),0==Grobal.numOfGame?cc.find("Canvas/room_bg/roomjushu").getComponent(cc.Label).string="1 / "+Grobal.maxOfGame+" 局":cc.find("Canvas/room_bg/roomjushu").getComponent(cc.Label).string=Grobal.numOfGame+" / "+Grobal.maxOfGame+" 局",cc.loader.loadRes("comm/pokers",cc.SpriteAtlas,function(i,n){for(var a=n.getSpriteFrames(),c=0;c<a.length;c++){var o=a[c];e[o._name]=o,Grobal.pokerSpriteFrameMap=e}if(0==Grobal.numOfGame){for(var s="",c=0;c<cc.vv.gameNetMgr.playerList.length;++c){var r=cc.vv.gameNetMgr.playerList[c];r.uid!=Grobal.uid&&(""==s?s+=r.userName:s=s+"、"+r.userName)}t.init()}else t.init()}),cc.vv.audioMgr.playBGM("bgm_room_1.mp3")},init:function(){cc.vv.gameNetMgr.dispatchEvent("game_play_init_over",!0),this.myNode.active=!1;var e=this;cc.vv.gameNetMgr.getIsOpen()&&(e.readyBtn.node.active=!1),this._voice_btn=cc.find("Canvas/gameview/voiceBtn").getComponent(cc.Button);this.poker;"standup"==Grobal.status&&"ready"==Grobal.status||e.checkPlayerStatus(),0==Grobal.numOfGame&&cc.vv.gameNetMgr.readyCount>=2&&Grobal.seatIndex,cc.vv.netRoot.on("game_restart",function(t){e.readyBtn.node.active=!0,Grobal.numOfGame==Grobal.maxOfGame&&e.readyCallBack(),cc.vv.uitools.ClearTime(cc.director.getScene())},this),cc.vv.netRoot.on("game_restart_notice",function(t){e.readyBtn.node.active=!0},this),cc.vv.netRoot.on("reconnect_update",function(t){cc.vv.userMgr.enterRoom(Grobal.roomNum),e.checkPlayerStatus()},this),cc.vv.netRoot.on("gameplayTimeout",function(t){e.readyCallBack()},this),cc.vv.netRoot.on("single_game_finish",function(t){cc.LOCALHOST?cc.vv.uitools.ShowLayer("GameFinishUI",e.node,t.detail):cc.vv.hallSDK.goResult()||cc.vv.uitools.ShowLayer("GameFinishUI",e.node,t.detail)},this),cc.vv.netRoot.on("user_state_dealingCards",function(t){cc.find("Canvas/room_bg/roomjushu").getComponent(cc.Label).string=Grobal.numOfGame+" / "+Grobal.maxOfGame+" 局",e.readyBtn.node.active=!1,Grobal.allPokers.length>0&&(e.myNode.getComponent("Control").displayAndClickPokers(n(Grobal.allPokers)),e.myNode.active=!0)},this),cc.vv.netRoot.on("user_dealingTheFiveCards",function(t){if(e.readyBtn.node.active=!1,Grobal.allPokers.length>0){var i=e.myNode.getComponent("Control");i.showSelectNiu(),i.displayPokers(n(Grobal.allPokers),!1),e.myNode.active=!0}},this),cc.vv.netRoot.on("user_dealingTheFourCards",function(t){e.readyBtn.node.active=!1,Grobal.allPokers.length>0&&(e.myNode.getComponent("Control").displayPokers(n(Grobal.allPokers),!1),e.myNode.active=!0)},this),cc.vv.netRoot.on("start_qiang_zhuang",function(t){if("standup"==Grobal.status||"ready"==Grobal.status)return e.readyBtn.node.active=!1,void cc.vv.gameNetMgr.dispatchEvent("show_tips_message","请等待下一局");e.readyBtn.node.active=!1,e.myNode.getComponent("Control").showQiangZhuan(),cc.vv.audioMgr.playSFX("effect/room_start_compare.mp3"),e.myNode.active=!0,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","抢庄")},this),cc.vv.netRoot.on("shezhi_beishu",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(e.readyBtn.node.active=!1,1==Grobal.isGrab?cc.vv.gameNetMgr.dispatchEvent("show_tips_message","等待闲家下注"):cc.vv.gameNetMgr.dispatchEvent("show_tips_message","请下注"))},this)},checkPlayerStatus:function(){cc.vv.socket.send("checkPlayerStatus",{roomNum:Grobal.roomNum})},readyCallBack:function(){var e=this.node.getChildByName("Time");void 0!=e&&null!=e&&e.removeFromParent(),cc.vv.socket.send("ready",{uid:Grobal.uid,roomNum:Grobal.roomNum}),this.myNode.getComponent("Control").reset(),this.readyBtn.node.active=!1},update:function(e){null!=this._lastPlayTime?Date.now()>this._lastPlayTime+1e3&&(this.onPlayerOver(),this._lastPlayTime=null):this._voiceMsgQueue.length>0&&this.playVoice()}}),cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"a8d41VU8uFBfoSPkMusKpsP","Game"),cc.Class({extends:cc.Component,properties:{_roominfo:null,_roomstate:null,_roombeishu:null,_roomjushu:null,_tips:null,_tipLabel:null,_tipslast:null,_lastTime:0,_shengyinBtn:null,_homeBtn:null},onLoad:function(){var e=this.node.getChildByName("room_bg"),t=this.node.getChildByName("gameview");this._roominfo=e.getChildByName("roominfo").getComponent(cc.Label),this._roomstate=e.getChildByName("roomstate"),this._roomjushu=e.getChildByName("roomjushu").getComponent(cc.Label),this._tips=t.getChildByName("tips"),this._tipLabel=this._tips.getChildByName("label").getComponent(cc.Label),this._roominfo.string="桌号："+Grobal.roomNum;var i=cc.find("Canvas/gameview/fangka/card");null!=i&&void 0!=i&&(i.getComponent(cc.Label).string=cc.args.currency+"张"),this._choiceBtn=t.getChildByName("choiceBtn"),null!=this._choiceBtn&&cc.vv.uitools.addClickEvent(this._choiceBtn,this.node,"GameLogic","ShowControlList"),this.initHandlers(),this.UpdateRoomInfo(),this.initPreLoad()},initPreLoad:function(){cc.loader.loadRes("prefabs/AlertUI",function(e,t){})},onTestCallBack:function(){},onGuizeBtnClick:function(){cc.LOCALHOST||cc.vv.hallSDK.goRule()},onTishiClick:function(){cc.vv.uitools.ShowLayer("TipRule",this.node)},onShengyinBtnClick:function(){cc.vv.uitools.ShowLayer("SettingUI2",this.node)},onHomeBtnClick:function(){cc.vv.uitools.ShowAlert(cc.director.getScene(),"确认返回主页",function(){cc.LOCALHOST?window.location.href="/":cc.vv.hallSDK.goHall()},!0)},onWanfaBtnClick:function(){cc.LOCALHOST||cc.vv.hallSDK.goWanfa()},SetClick:function(){cc.vv.uitools.ShowLayer("SettingUI2",this.node)},ShowControlList:function(){var e=this;cc.loader.loadRes("prefabs/ControllUI",function(t,i){if(null==e.node.getChildByName("ControllUI")){var n=cc.instantiate(i);e.node.addChild(n)}})},ShowTips:function(e){var t=this;null==e?t._tips.active=!1:(t._tips.active=!0,t._tipLabel.string=e,t._tips.height=this._tips.getChildByName("label").height+20,"standup"!=Grobal.status&&"ready"!=Grobal.status||"网络不稳定,正在重新连接"==e||cc.vv.gameNetMgr.getIsOpen()&&(t._tipLabel.string="请等待下一局"))},initHandlers:function(){var e=this;cc.vv.netRoot.on("show_tips_message",function(t){e.ShowTips(t.detail)},this)},UpdateRoomInfo:function(){if(void 0!=cc.args.ext&&null!=cc.args.ext){var e=JSON.parse(decodeURIComponent(cc.args.ext));this._roomstate.getChildByName("difen").getComponent(cc.Label).string="底分："+e.difen+"分"}},update:function(e){if(1==this._tips.active){var t=this._tipLabel.string.replace(this._tipslast,"");Date.now()-this._lastTime>1e3&&(null==this._tipslast||"..."==this._tipslast?this._tipslast=".":this._tipslast=this._tipslast+".",this._tipLabel.string=t+this._tipslast,this._lastTime=Date.now())}}}),cc._RF.pop()},{}],HTTP:[function(e,t,i){"use strict";cc._RF.push(t,"393007tIjxANqjaEynrBoaM","HTTP");var n=cc.Class({extends:cc.Component,statics:{sessionId:0,userid:0,master_url:URL,url:URL,sendRequest:function(e,t,i,a){var c=cc.loader.getXMLHttpRequest();c.timeout=5e3;var o="?";for(var s in t)"?"!=o&&(o+="&"),o+=s+"="+t[s];null==a&&(a=n.url);var r=a+e+encodeURI(o);return c.open("GET",r,!0),cc.sys.isNative&&c.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),c.onreadystatechange=function(){if(4===c.readyState&&c.status>=200&&c.status<300)try{var e=JSON.parse(c.responseText);null!==i&&i(e)}catch(e){}},c.send(),c}}});cc._RF.pop()},{}],Loading:[function(e,t,i){"use strict";cc._RF.push(t,"d5514vyyh1PT79voJ6ap6oD","Loading"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,_tipStr:"1",_isloading:!1,_progress:0,_lasttime:0,_load:0},onLoad:function(){cc.view.setDesignResolutionSize(640,1024,0),this.initConfig()},initConfig:function(){var t=this;cc.vv={},cc.vv.http=e("../utils/HTTP"),cc.loader.load(cc.url.raw("resources/config.json"),function(e,i){e||(cc.LOCALHOST=i.localhost,console.log("------------"),console.log(location.hostname),"auto"==i.localhost&&(cc.sys.isNative||!location||"localhost"!=location.hostname&&"127.0.0.1"!=location.hostname?cc.LOCALHOST=!1:cc.LOCALHOST=!0),cc.vv.http.url=i.http,cc.VERSION=i.version,cc.LocalGameId=i.localGameId,cc.LocalGameNum=i.localGameNum,t.initMgr())})},initMgr:function(){cc.vv.socket=e("../utils/Socket");var t=e("../mgr/AudioMgr");cc.vv.audioMgr=new t,cc.vv.audioMgr.init();var i=e("../mgr/UserMgr");if(cc.vv.userMgr=new i,void 0==cc.vv.gameNetMgr){var n=e("../mgr/GameNetMgr");cc.vv.gameNetMgr=new n}var a=cc.find("root");cc.vv.gameNetMgr.dataEventHandler=a,cc.vv.netRoot=a;var c=e("../comp/UI");if(cc.vv.uitools=new c,void 0!=cc.LOCALHOST&&void 0!=cc.VERSION||cc.vv.uitools.ShowAlert(cc.director.getScene(),"配置加载失败，请重进",function(){window.parent.location.href="/"},!1),cc.LOCALHOST?cc.vv.hallPlay={}:cc.vv.hallPlay=hall_config,""!=cc.vv.hallPlay.gameId?cc.args=cc.vv.hallPlay:cc.args=this.urlParse(),void 0!=cc.args.ext){var o=decodeURIComponent(cc.args.ext);cc.args.ext_json=JSON.parse(o);var s=cc.args.ext_json.wanfa;if(null!==s){var r=s.split("_");cc.args.ext_json.playType=r[0],cc.args.ext_json.zhuangType=r[1]}cc.args.ext=JSON.stringify(cc.args.ext_json)}cc.LOCALHOST||(cc.vv.hallSDK=hall_api,cc.vv.hallSDK.init('{"uid":"'+cc.args.uid+'","gameId":"'+cc.args.gameId+'","roomNum":"'+cc.args.roomNum+'"}')),void 0==cc.args&&(cc.args={}),this._tips=cc.find("Canvas/nettips"),this._tipLabel=this._tips.getComponent(cc.Label),this.startPreLoading()},ShowTips:function(e){var t=this;null==e?t._tips.active=!1:(t._tips.active=!0,t._tipLabel.string=e)},startPreLoading:function(){this._tipStr="正在加载资源，请稍候",this._isloading=!0;var e=this;if(void 0!==cc.args.uid)Grobal.uid=cc.args.uid;else if(cc.LOCALHOST){var t=Math.floor(100*Math.random())+100;Grobal.uid=t.toString(),cc.args.uid=Grobal.uid,cc.args.userName=Grobal.uid,void 0==cc.args.gameId&&(cc.args.gameId=cc.LocalGameId),void 0==cc.args.roomNum&&(cc.args.roomNum=cc.LocalGameNum)}void 0==cc.args.uid||null==cc.args.uid?cc.vv.uitools.ShowAlert(cc.director.getScene(),"网络问题,请刷新重进",function(){cc.LOCALHOST?window.parent.location.href="/":cc.vv.hallSDK.backRoom(cc.args.roomNum)},!1):cc.vv.userMgr.login(),cc.vv.netRoot.on("show_tips_message",function(t){e.ShowTips(t.detail)},this)},urlParse:function(){var e={};if(null==window.location)return e;for(var t,i,n=window.location.href,a=n.indexOf("?"),c=n.substr(0,a),o=(n=n.substr(a+1)).split("&"),s=0;s<o.length;s++)(a=o[s].indexOf("="))>0&&(t=o[s].substring(0,a),i=o[s].substr(a+1),e[t]=i);return e.href=c,e}}),cc._RF.pop()},{"../comp/UI":"UI","../mgr/AudioMgr":"AudioMgr","../mgr/GameNetMgr":"GameNetMgr","../mgr/UserMgr":"UserMgr","../utils/HTTP":"HTTP","../utils/Socket":"Socket"}],PokerAct:[function(e,t,i){"use strict";cc._RF.push(t,"34e68KzfLNAy61TQsCHHH18","PokerAct"),cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite},onLoad:function(){},init:function(e){this.sprite.spriteFrame=e;var t=new Array,i=cc.scaleTo(.2,1.2),n=cc.scaleTo(.2,1);t.push(i),t.push(n);var a=cc.sequence(t);this.node.runAction(a)}}),cc._RF.pop()},{}],Root:[function(e,t,i){"use strict";cc._RF.push(t,"16f93sEHY5KvYnG1mEPAY7W","Root"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],ScoreAni:[function(e,t,i){"use strict";cc._RF.push(t,"76c0fHi3Q9EM60lP1lXCNIR","ScoreAni"),cc.Class({extends:cc.Component,properties:{_prefabs:null,_data:null,_parent:null},onLoad:function(){},show:function(e,t){var i=this;this._data=e,this._parent=t,cc.loader.loadRes("prefabs/coin",function(e,t){i._prefabs=t,i.showOut()})},showOut:function(){var e=this;if(this._data.outArr.length>0){for(var t=0;t<this._data.outArr.length;t++)this.createSingle(this._data.outArr[t],this._data.sourcePos);cc.vv.audioMgr.playSFX("effect/coin_income.mp3"),setTimeout(function(){e.showIn()},1500)}else e.showIn()},showIn:function(){var e=this;if(this._data.inArr.length>0){for(var t=0;t<this._data.inArr.length;t++)this.createSingle(this._data.sourcePos,this._data.inArr[t]);cc.vv.audioMgr.playSFX("effect/coin_income.mp3"),setTimeout(function(){e._parent.removeFromParent()},1500)}else e._parent.removeFromParent()},createSingle:function(e,t){for(var i=0;i<5;i++){var n=cc.instantiate(this._prefabs),a=e.x,c=e.y;n.setPosition(cc.p(a,c));new Array,cc.moveTo(1,t),cc.callFunc(function(){n.removeFromParent()});n.runAction(cc.moveTo(.1+.15*(i+1),t)),this._parent.addChild(n)}}}),cc._RF.pop()},{}],Score:[function(e,t,i){"use strict";cc._RF.push(t,"dd0289n215KZ5Rj7Um4xO3Q","Score"),cc.Class({extends:cc.Component,properties:{adds:{default:[],type:[cc.Node]},_totalAdd:cc.Node,_tatalScore:0},init:function(){this.node.active=!0;for(var e=0;e<3;e++)this.adds[e].active=!1;this._totalAdd=this.node.getChildByName("total_score"),this._totalAdd.active=!1,this._tatalScore=0},ShowScore:function(e,t){var i=this;this.adds[e].active=!0,this.adds[e].getChildByName("add_score").getComponent(cc.Label).string=t.score,this.adds[e].getChildByName("ext_add").getComponent(cc.Label).string=t.ext_score;var n=parseInt(t.score)+parseInt(t.ext_score);i.AddTotal(n)},AddTotal:function(e){this._tatalScore=this._tatalScore+e,this.ShowAddTotal()},ShowTotal:function(e){this._tatalScore=e,this.ShowAddTotal()},ShowAddTotal:function(){var e=this;e._totalAdd.active=!0,e._totalAdd.getChildByName("add_score").getComponent(cc.Label).string=e._tatalScore}}),cc._RF.pop()},{}],SeatControl:[function(e,t,i){"use strict";cc._RF.push(t,"316f8nhmO5LEbFoxObKpigy","SeatControl"),cc.Class({extends:cc.Component,properties:{seats:{default:[],type:[cc.Node]},_seats:[],_chatVoices:[],_cards:null,_daqiang_agrs:null,_beida_agrs:null},onLoad:function(){if(this.initView(),this.initEventHandlers(),this.initTempDate(),0==Grobal.numOfGame){for(var e=!1,t=0;t<cc.vv.gameNetMgr.playerList.length;++t)cc.vv.gameNetMgr.playerList[t].uid!=Grobal.uid&&(e=!0);1==e&&(this.node.active=!1)}else this.node.active=!0},initTempDate:function(){},initView:function(){var e=this;this._seats=new Array,this._chatVoices=new Array,this._cards=new Array;for(var t=0;t<e.seats.length;t++){s=e.seats[t].getComponent("Seat");e.seats[t].active=!1}for(var i=cc.vv.gameNetMgr.playerList,n=0;n<i.length;n++){var a=cc.vv.gameNetMgr.getLocalIndex(n),c=e.seats[a].getComponent("Card");c.ShowCurrentStatus(i[n]),e._cards.push(c)}for(var o=0;o<i.length;o++){var a=cc.vv.gameNetMgr.getLocalIndex(o),s=e.seats[a].getComponent("Seat");e._seats.push(s),s.setUserInfo(i[o]),e.seats[a].active=!0}cc.vv.gameNetMgr.seats=e._seats},initSeatCard:function(e){for(var t=this,i=cc.vv.gameNetMgr.playerList,n=0;n<i.length;n++){var a=cc.vv.gameNetMgr.getSeatIndexByID(i[n].uid),c=t._seats[a].getComponent("Card");t._cards.push(c),i[n].uid!==Grobal.uid&&"standup"!=i[n].status&&c.ShowCardNormal()}},changeUserState:function(e){var t=this,i=parseInt(e.uid),n=cc.vv.gameNetMgr.getSeatIndexByID(i),a=t._seats[n];if("qiangzhuang"==e.state)if(e.value>0){e.value;a.onShowState("qiangzhuang",e.value);c="effect/qiangzhuang.mp3";cc.vv.audioMgr.playSFX(c)}else{a.onShowState("nograb_icon");c="effect/buqiang.mp3";cc.vv.audioMgr.playSFX(c)}else if("beishu"==e.state){a.onShowStateBNum(e.value,"rate");var c="effect/beishu"+e.value+".mp3";cc.vv.audioMgr.playSFX(c)}else if("ready"==e.state)a.onShowState("ready");else if("dealpoker"==e.state){var o=t._cards[n];i==Grobal.uid?o.ShowSelfCardFinish():o.ShowCardFinish()}},showZhuanAni:function(e,t){var i=this,n=(parseInt(t.uid),cc.vv.gameNetMgr.getSeatIndexByID(t.uid)),a=i._seats[n];if(void 0!=a)if(1==t.iszhuan){if(a.showFrameAction(),"standup"==Grobal.status||"ready"==Grobal.status)return;t.uid==Grobal.uid?(Grobal.isGrab=!0,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","等待闲家下注")):(Grobal.isGrab=!1,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","请下注")),cc.vv.gameNetMgr.dispatchEvent("shezhi_beishu")}else a.setUserFrame(!0)},showDealZhuanAni:function(e){for(var t=this,i=0;i<t._seats.length;i++)(a=t._seats[i]).setUserFrame(!1);if(1==e.user.length){var n=cc.vv.gameNetMgr.getSeatIndexByID(e.user[0]),a=t._seats[n];a.showFrameAction(),a.showZhuan(!0),cc.vv.gameNetMgr.dispatchEvent("shezhi_beishu")}else{var c=e.user.length,o=3*c;o>=9&&(o=9);for(var s=-1,r=new Array,l=0;l<o;l++){for(var u=Math.floor(Math.random()*c);u==s;)u=Math.floor(Math.random()*c);s=u;var d={};d.uid=e.user[u],d.iszhuan=!1;g=cc.callFunc(t.showZhuanAni,t,d);r.push(g);var h=cc.delayTime(.4);r.push(h)}var v=cc.delayTime(.2);r.push(v);var m={};m.uid=e.zhuang,m.iszhuan=!0;var g=cc.callFunc(t.showZhuanAni,t,m);r.push(g);var p=cc.callFunc(function(){for(var i=0;i<t._seats.length;i++){var n=t._seats[i];n.getSeatUid()==e.zhuang?n.showZhuan(!0):(n.showZhuan(!1),n.setUserFrame(!1)),n.updateQiangStatus()}});r.push(p);var _=cc.sequence(r);this.node.runAction(_)}},ShowUserCards:function(e,t){var i=this,n=parseInt(t.uid),a=cc.vv.gameNetMgr.getSeatIndexByID(n),c=i._cards[a];n==Grobal.uid?c.ShowSeflCardResult(t.cards,t.value,e):c.ShowCardResult(t.cards,t.value,e)},ShowScore:function(e,t){for(var i=this,n=0;n<t.uids.length;n++){var a=parseInt(t.uids[n]),c=cc.vv.gameNetMgr.getSeatIndexByID(a),o=i._seats[c];o.onShowStateBNum(t.score[a].score,"score"),o.updateScore(t.score[a].totalScore),t.uids[n]==Grobal.uid&&t.score[a].score>0&&cc.vv.audioMgr.playSFX("effect/win.mp3")}},ShowCoinAnimation:function(e,t){for(var i=this,n=-1,a=cc.p(320,640),c=0;c<i._seats.length;c++)if(1==i._seats[c].getIsZhuan()){n=i._seats[c].getSeatUid();l=cc.vv.gameNetMgr.getSeatNodeByUid(parseInt(n));a=i.node.convertToWorldSpaceAR(i.seats[l].getPosition())}for(var o=new Array,s=new Array,c=0;c<t.uids.length;c++){var r=parseInt(t.uids[c]);if(t.uids[c]!==n){var l=cc.vv.gameNetMgr.getSeatNodeByUid(r),u=i.node.convertToWorldSpaceAR(i.seats[l].getPosition());t.score[r].score>0?s.push(u):o.push(u)}}(t={}).sourcePos=a,t.outArr=o,t.inArr=s,cc.vv.uitools.ShowScoreAni(t),0==t.inArr.length&&t.outArr.length>=2&&cc.vv.uitools.ShowAnimation("tongsha",cc.director.getScene(),{action:"animation",isloop:!1,posx:320,posy:640})},resetSeat:function(){for(var e=this,t=cc.vv.gameNetMgr.playerList,i=0;i<t.length;i++)e._cards[i].hideCard(),(n=e._seats[i]).onShowState("wu");for(i=0;i<e._seats.length;i++){var n=e._seats[i];n.setUserFrame(!1),n.hideStatus(),"turn"==cc.args.ext_json.zhuangType&&n.showZhuan(!1)}},resetSelf:function(){for(var e=this,t=cc.vv.gameNetMgr.playerList,i=0;i<t.length;i++){var n=cc.vv.gameNetMgr.getLocalIndex(i);e.seats[n].getComponent("Seat").updateUser(t[i])}},ShowResult:function(e){for(var t=this,i=e.uids,n=(e.cards,{}),a=0;a<i.length;a++)n[i[a]]=e[i[a]];var c=new Array,o={};o.uids=i,o.score=n;var s=cc.delayTime(2);c.push(s);var r=cc.callFunc(t.ShowCoinAnimation,t,o);c.push(r);var l=cc.delayTime(1.5);c.push(l);var u=cc.callFunc(function(){for(var e=cc.vv.gameNetMgr.playerList,i=0;i<e.length;i++)t._cards[i].hideCard()});c.push(u);var d=cc.delayTime(.5);c.push(d);var h=cc.callFunc(t.ShowScore,t,o);c.push(h);var v=cc.delayTime(2.5);c.push(v);var m=cc.callFunc(function(){t.resetSeat(),cc.vv.gameNetMgr.dispatchEvent("game_restart")});c.push(m);var g=cc.sequence(c);this.node.runAction(g)},updateQiangStatus:function(){for(var e=this,t=0;t<e._seats.length;t++)e._seats[t].updateQiangStatus()},initEventHandlers:function(){var e=this;cc.vv.netRoot.on("new_user_comes_push",function(t){e.initView()},this),cc.vv.netRoot.on("user_state_changed",function(t){e.initView()},this),cc.vv.netRoot.on("user_state_dealingCards",function(t){e.initSeatCard(null)},this),cc.vv.netRoot.on("card_start_play",function(t){e.ShowResult(t.detail)},this),cc.vv.netRoot.on("play_state_change",function(t){e.changeUserState(t.detail)},this),cc.vv.netRoot.on("deal_zhuang",function(t){e.showDealZhuanAni(t.detail)},this),cc.vv.netRoot.on("user_deal_poker_done",function(t){e.ShowUserCards("1",t.detail);var i="effect/man"+t.detail.value+".mp3";cc.vv.audioMgr.playSFX(i)},this),cc.vv.netRoot.on("game_play_init_over",function(e){this.node.active=e.detail},this),cc.vv.netRoot.on("shezhi_beishu",function(t){e.updateQiangStatus()},this),cc.vv.netRoot.on("update_qiang_status",function(e){},this),cc.vv.netRoot.on("checkPlayerStatus_success",function(t){e.resetSelf()},this)}}),cc._RF.pop()},{}],Seat:[function(e,t,i){"use strict";cc._RF.push(t,"e8e118sLfNKiJkR8tTsEQj+","Seat"),cc.Class({extends:cc.Component,properties:{_isinit:!1,_unsel:null,_userInfo:null,_offline:null,_userName:null,_userScore:null,_userImage:null,_userState:null,_userFrame:null,_bg:null,_info:null,_userIcon:null,_voicemsg:null,_adj:null,_voicetime:0,_voicenum:3,_fangzhu:null,_guanzhan:null},onLoad:function(){0==this._isinit&&this.init()},init:function(){this._state=this.node.getChildByName("state"),this._statesp=this._state.getChildByName("spr"),this._stateSpr=this._state.getChildByName("spr").getComponent(cc.Sprite),this._userInfo=this.node.getChildByName("user_info"),this._guanzhan=this._userInfo.getChildByName("guanzhan"),this._offline=this._userInfo.getChildByName("user_offline"),this._fangzhu=this._userInfo.getChildByName("fangzhu"),this._userState=this._userInfo.getChildByName("user_state"),this._userName=this._userInfo.getChildByName("user_name").getComponent(cc.Label),this._userScore=this._userInfo.getChildByName("user_score").getComponent(cc.Label),this._userIcon=this._userInfo.getChildByName("user_icon").getComponent(cc.Sprite),this._userFrame=this._userInfo.getChildByName("frame"),this._userFrame.active=!1,this._voicemsg=this.node.getChildByName("voicemsg"),null!=this._voicemsg&&(this._adj=this._voicemsg.getChildByName("adj"),this._voicemsg.active=!1),this._isinit=!0},getUserIcon:function(){return this._userIcon.spriteFrame},showZhuan:function(e){this._fangzhu.active=e},getIsZhuan:function(){return 1==this._fangzhu.active},onIconClicked:function(e){if("standup"!=this._info.status){var t={};t.spriteFrame=this._userIcon.spriteFrame,t.uid=this._info.uid,t.ip=this._info.ip,t.userName=this._info.userName,cc.vv.uitools.ShowLayer("UserInfo",cc.director.getScene(),t)}},setUserIcon:function(e){var t=this;cc.loader.load(decodeURIComponent(e),function(e,i){i&&i.width>0&&(t._userIcon.spriteFrame=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height)))})},getSeatUid:function(){return void 0==this._info||null==this._info?-1:this._info.uid},voiceMsg:function(e){this._voicemsg&&(this._voicemsg.active=e,!0===e?(this._voicenum=3,this._voicetime=Date.now()):this._voicetime=0)},updateQiangStatus:function(){for(var e=this,t=e._state.getChildByName("beishu"),i=0;i<cc.vv.gameNetMgr.playerList.length;i++){var n=cc.vv.gameNetMgr.playerList[i];1==n.isGrab&&n.uid==e._info.uid&&void 0!=t&&null!=t&&(t.active=!0)}e._statesp.active=!1},onShowState:function(e,t){var i=this;if(t||(t=0),"wu"==e)return i._state.active=!1,void(i._statesp.active=!1);i._state.active=!0,i._statesp.active=!0;var n=i._state.getChildByName("rate"),a=i._state.getChildByName("win"),c=i._state.getChildByName("lose"),o=i._state.getChildByName("beishu"),s=i._state.getChildByName("ready");if(n.active=!1,a.active=!1,c.active=!1,s.active=!1,"ready"==e)return i._statesp.active=!1,cc.loader.loadRes("niuniu/"+e+".png",cc.SpriteFrame,function(e,t){s.getComponent(cc.Sprite).spriteFrame=t}),void(s.active=!0);void 0!=o&&null!=o&&(o.active=!1);var r=i._statesp.getChildByName("beishu");t>0?(cc.loader.loadRes("niuniu/"+e+".png",cc.SpriteFrame,function(e,t){i._stateSpr.spriteFrame=t}),cc.loader.loadRes("niuniu/x"+t+".png",cc.SpriteFrame,function(e,t){r.getComponent(cc.Sprite).spriteFrame=t}),r.active=!0,void 0!=o&&null!=o&&(cc.loader.loadRes("niuniu/x"+t+".png",cc.SpriteFrame,function(e,t){o.getComponent(cc.Sprite).spriteFrame=t}),o.active=!1)):(cc.loader.loadRes("niuniu/"+e+".png",cc.SpriteFrame,function(e,t){i._stateSpr.spriteFrame=t}),void 0!=r&&null!=r&&(r.active=!1),void 0!=o&&null!=o&&(cc.loader.loadRes("niuniu/x1.png",cc.SpriteFrame,function(e,t){o.getComponent(cc.Sprite).spriteFrame=t}),o.active=!1))},onShowStateBNum:function(e,t){var i=this;i._state.active=!0,i._statesp.active=!1;var n=i._state.getChildByName("rate"),a=i._state.getChildByName("win"),c=i._state.getChildByName("lose"),o=i._state.getChildByName("beishu"),s=i._state.getChildByName("ready");if(o.active=!1,s.active=!1,a.stopAllActions(),c.stopAllActions(),"rate"==t)n.active=!0,a.active=!1,c.active=!1,(r=n.getComponent(cc.Label)).string="x"+e;else{if(e>0)n.active=!1,a.active=!0,a.opacity=255,c.active=!1,(r=a.getComponent(cc.Label)).string="+"+Math.abs(e);else{n.active=!1,a.active=!1,c.active=!0,c.opacity=255;var r=c.getComponent(cc.Label);r.string="-"+Math.abs(e)}var l=new Array,u=cc.moveBy(2,cc.p(0,30)),d=cc.fadeOut(.1),h=cc.moveBy(.2,cc.p(0,-30));l.push(u),l.push(d),l.push(h);var v=cc.sequence(l);e>0?a.runAction(v):c.runAction(v)}},updateUser:function(e){var t=this,i=t._state.getChildByName("ready"),n=t._statesp.getChildByName("beishu"),a=t._state.getChildByName("beishu"),c=t._state.getChildByName("rate");"standup"==e.status?(this.node.getComponent("Card").hideCard(),Grobal.uid==t._info.uid&&cc.vv.gameNetMgr.dispatchEvent("game_restart_notice")):"ready"==e.status?(t._statesp.active=!1,a.active=!1,t._state.active=!0,c.active=!1,cc.loader.loadRes("niuniu/ready.png",cc.SpriteFrame,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t}),i.active=!0):"qianged"==e.status?(i.active=!1,a.active=!1,t._statesp.active=!0,c.active=!1,e.QiangNum>0?(cc.loader.loadRes("niuniu/qiangzhuang.png",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),cc.loader.loadRes("niuniu/x"+e.QiangNum+".png",cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),n.active=!0):(cc.loader.loadRes("niuniu/nograb_icon.png",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),n.active=!1)):"beishu"==e.status?(i.active=!1,a.active=!1,t._statesp.active=!1,c.active=!1,1==e.isGrab&&(cc.loader.loadRes("niuniu/x"+e.QiangNum+".png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._fangzhu.active=!0)):"beishued"!=e.status&&"arranging"!=e.status&&"arranged"!=t._info.status||(i.active=!1,a.active=!1,t._statesp.active=!1,1==e.isGrab?(cc.loader.loadRes("niuniu/x"+e.QiangNum+".png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._fangzhu.active=!0,c.active=!1):e.baserate>0&&(c.getComponent(cc.Label).string="x"+e.baserate,c.active=!0))},setUserInfo:function(e){var t=this;if(t._info=e,0==this._isinit&&t.init(),null==t._info||null==t._info.status)this._state.active=!1,this._userInfo.active=!1;else{var i=t._state.getChildByName("ready"),n=t._statesp.getChildByName("beishu"),a=t._state.getChildByName("beishu"),c=t._state.getChildByName("rate");this._state.active=!1,t._info.isOnline&&("ready"==t._info.status?(this._state.active=!0,i.active=!0,n.active=!1,a.active=!1,c.active=!1,t._statesp.active=!1,t._fangzhu.active=!1):"qianged"==t._info.status?(t._info.QiangNum>0?(cc.loader.loadRes("niuniu/qiangzhuang.png",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),cc.loader.loadRes("niuniu/x"+t._info.QiangNum+".png",cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),n.active=!0):(cc.loader.loadRes("niuniu/nograb_icon.png",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),n.active=!1),t._statesp.active=!0,t._state.active=!0,i.active=!1,a.active=!1,c.active=!1):"beishu"==t._info.status?(1==t._info.isGrab?(0!=t._info.QiangNum&&void 0!=t._info.QiangNum||(t._info.QiangNum=1),cc.loader.loadRes("niuniu/x"+t._info.QiangNum+".png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._state.active=!0,t._fangzhu.active=!0):t._state.active=!1,t._statesp.active=!1,i.active=!1,n.active=!1,c.active=!1):"beishued"!=t._info.status&&"arranging"!=t._info.status&&"arranged"!=t._info.status||(1==t._info.isGrab?(0!=t._info.QiangNum&&void 0!=t._info.QiangNum||(t._info.QiangNum=1),cc.loader.loadRes("niuniu/x"+t._info.QiangNum+".png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),t._fangzhu.active=!0,a.active=!0,t._state.active=!0,t._statesp.active=!1,i.active=!1,n.active=!1,c.active=!1):(t._info.baserate>0&&(c.getComponent(cc.Label).string="x"+t._info.baserate,c.active=!0,t._state.active=!0,a.active=!1),t._statesp.active=!1,i.active=!1,n.active=!1))),this._userInfo.active=!0,null!=t._info.avatar&&void 0!=t._info.avatar&&t.setUserIcon(t._info.avatar),t._guanzhan.active=!1,"standup"!=t._info.status&&"ready"!=t._info.status||!t._info.isOnline||cc.vv.gameNetMgr.getIsOpen()&&(t._guanzhan.active=!0),t._info.isOnline?t._offline.active=!1:t._offline.active=!0,0==t._info.isGrab||null==t._info.isGrab?t._fangzhu.active=!1:t._fangzhu.active=!0}this._userName&&null!==t._info&&null!==t._info.uid&&(this._userName.string=decodeURIComponent(t._info.userName),this._userScore.string=t._info.score+""),null!==t._info&&null!==t._info.isQiang&&1==t._info.isQiang&&t.onShowState("graber_icon")},setUserFrame:function(e){if(1==e){this._userFrame.active=!0,this._userFrame.opacity=255;var t=new Array,i=cc.scaleTo(.15,1.1),n=cc.scaleTo(.15,1),a=cc.fadeOut(.1);t.push(i),t.push(n),t.push(a);var c=cc.sequence(t);this._userFrame.runAction(c),cc.vv.audioMgr.playSFX("effect/select.mp3")}else this._userFrame.active=!1,this._userFrame.opacity=0},hideStatus:function(){this._state.active=!1},showFrameAction:function(){var e=this;e._userFrame.stopAllActions(),e._userFrame.active=!0,e._userFrame.opacity=255;var t=new Array,i=cc.fadeIn(.1),n=cc.scaleTo(.4,1.3),a=cc.scaleTo(.4,1.05),c=cc.blink(.8,3),o=cc.fadeIn(.1);t.push(i),t.push(n),t.push(a),t.push(c),t.push(o);var s=cc.sequence(t);this._userFrame.runAction(s)},updateScore:function(e){this._userScore.string=e+""},update:function(e){if(null!=this._voicemsg&&!0===this._voicemsg.active&&Date.now()-this._voicetime>700&&this._voicetime>0){this._voicetime=Date.now();for(var t=0;t<this._adj.children.length;++t)this._adj.children[t].active=!1;this._adj.children[this._voicenum-1].active=!0,this._voicenum=this._voicenum-1,this._voicenum<=0&&(this._voicenum=3)}}}),cc._RF.pop()},{}],SettingUI:[function(e,t,i){"use strict";cc._RF.push(t,"b6e45Bv3H9FAJrJv6ilRwKz","SettingUI"),cc.Class({extends:cc.Component,properties:{soundSprite:cc.Sprite,effectSprite:cc.Sprite},onLoad:function(){this.initView()},initView:function(){var e=this,t=cc.sys.localStorage.getItem("bgmVolume"),i=cc.sys.localStorage.getItem("sfxVolume");0==t||null==t?cc.loader.loadRes("comm/onsetclose.png",cc.SpriteFrame,function(t,i){e.soundSprite.spriteFrame=i}):cc.loader.loadRes("comm/onsetopen.png",cc.SpriteFrame,function(t,i){e.soundSprite.spriteFrame=i}),0==i||null==i?cc.loader.loadRes("comm/onsetclose.png",cc.SpriteFrame,function(t,i){e.effectSprite.spriteFrame=i}):1==i&&cc.loader.loadRes("comm/onsetopen.png",cc.SpriteFrame,function(t,i){e.effectSprite.spriteFrame=i})},OnCloseClick:function(){this.node.removeFromParent()},OnSoundClick:function(){0==cc.sys.localStorage.getItem("bgmVolume")?cc.vv.audioMgr.setBGMVolume(.3):cc.vv.audioMgr.setBGMVolume(0),this.initView()},OnEffectClick:function(){0==cc.sys.localStorage.getItem("sfxVolume")?cc.vv.audioMgr.setSFXVolume(1):cc.vv.audioMgr.setSFXVolume(0),this.initView()}}),cc._RF.pop()},{}],Socket:[function(e,t,i){"use strict";cc._RF.push(t,"5349ay+m/ZJ84WTjxw3colC","Socket");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.io;cc.Class({extends:cc.Component,statics:{ip:"",sio:null,isPinging:!1,fnDisconnect:null,timeId:null,handlers:{},online:!0,addHandler:function(e,t){if(!this.handlers[e]){var i=function(i){"disconnect"!=e&&"string"==typeof i&&(i=JSON.parse(i)),t(i)};this.handlers[e]=i,this.sio&&this.sio.on(e,i)}},connect:function(e,t){var i=this,n={reconnect:!0,reconnectionAttempts:10,reconnectionDelay:1e3,reconnectionDelayMax:2e3,timeout:5e3,"force new connection":!0,"max reconnection attempts":10,transports:["websocket","polling"]},a=!1;this.sio=window.io.connect(this.ip,n),this.sio.on("connecting",function(e){}),this.sio.on("connect",function(e){i.sio.connected=!0,cc.vv.gameNetMgr.dispatchEvent("show_tips_message",null),a&&cc.vv.gameNetMgr.dispatchEvent("reconnect_update",null)}),this.sio.on("reconnecting",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","正在重连")}),this.sio.on("reconnect",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","重连成功"),a=!0}),this.sio.on("connect_error",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","重连失败")}),this.sio.on("disconnect",function(e){i.sio.connected=!1,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","已断开连接，请重进")}),this.sio.on("reconnect_failed",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","重连失败，请重进"),cc.vv.uitools.ShowAlert(cc.director.getScene(),"你已断开连接,请重新连接",function(){cc.sys.isNative?cc.director.loadScene("web"):window.parent.location.href="/"},!1)}),this.sio.on("connect_failed",function(){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","连接失败"),a=!0});for(var c in this.handlers){var o=this.handlers[c];"function"==typeof o&&("disconnect"==c?this.fnDisconnect=o:this.sio.on(c,o))}},startHearbeat:function(){this.sio.on("game_pong",function(t){e.lastRecieveTime=Date.now(),e.delayMS=e.lastRecieveTime-e.lastSendTime,0==e.online&&(cc.vv.gameNetMgr.dispatchEvent("show_tips_message",null),cc.vv.gameNetMgr.dispatchEvent("reconnect_update",null)),e.online=!0}),this.lastRecieveTime=Date.now();var e=this;e.isPinging||(e.isPinging=!0,cc.game.on(cc.game.EVENT_HIDE,function(){e.ping()}),setInterval(function(){e.sio&&e.ping()}.bind(this),5e3),setInterval(function(){e.sio&&Date.now()-e.lastRecieveTime>2e4&&e.close()}.bind(this),500))},send:function(e,t){this.sio&&this.sio.connected&&(null!=t&&"object"==(void 0===t?"undefined":n(t))&&(t=JSON.stringify(t)),this.sio.emit(e,t))},ping:function(){if(this.sio){var e=this.online;this.lastSendTime=Date.now(),this.send("game_ping",{isonline:e})}},close:function(){this.delayMS=null,this.sio&&this.sio.connected&&(this.sio.connected=!1,this.sio.disconnect(),this.sio=null),this.sio=null}}});cc._RF.pop()},{}],Time:[function(e,t,i){"use strict";cc._RF.push(t,"1e1a8aDeEhDXpCp2LDjN0b6","Time"),cc.Class({extends:cc.Component,properties:{_time:10,_args:null,_showtime:0,_eventName:null},onLoad:function(){},init:function(e){this.node.active=!1,this._args=e,this._time=this._args.time,this._showtime=Date.parse(new Date)/1e3,this.node.x=this._args.x,this.node.y=this._args.y,this._eventName=this._args.eventName,this.node.getChildByName("timelabel").getComponent(cc.Label).string=this._time,this.initView()},initView:function(){this.node.active=!0},hide:function(){this.node.removeFromParent()},update:function(){1==this.node.active&&this._showtime>0&&(this._time>0?Date.parse(new Date)/1e3>=this._showtime+1&&(this._showtime=Date.parse(new Date)/1e3,this._time=this._time-1,this._time<10&&(this._time=this._time),this.node.getChildByName("timelabel").getComponent(cc.Label).string=this._time):1==this.node.active&&null!=this._eventName&&(cc.vv.gameNetMgr.dispatchEvent(this._eventName),this.hide()))}}),cc._RF.pop()},{}],UI:[function(e,t,i){"use strict";cc._RF.push(t,"2715fKQJ0RIFoffVexShdnt","UI"),cc.Class({extends:cc.Component,properties:{},addClickEvent:function(e,t,i,n){var a=new cc.Component.EventHandler;a.target=t,a.component=i,a.handler=n,e.getComponent(cc.Button).clickEvents.push(a)},ShowLoading:function(e,t){void 0!=t&&null!=t||(t=8e3),cc.loader.loadRes("prefabs/LoadingUI",function(t,i){var n=cc.instantiate(i);n.tag=10001,e.addChild(n)}),e.on("on_hide_loading_ui",function(t){null!==e.getChildByTag(10001)&&e.removeChildByTag(10001)}),setTimeout(function(){null!==e.getChildByTag(10001)&&e.removeChildByTag(10001)},t)},ShowAlert:function(e,t,i,n){cc.loader.loadRes("prefabs/AlertUI",function(a,c){var o=cc.instantiate(c);o.setPosition(cc.p(0,0)),o.tag=10003,null!==e.getChildByTag(10003)&&e.removeChildByTag(10003),e.addChild(o),o.getComponent("Alert").show(t,i,n)})},ShowAlert2:function(e,t,i,n,a,c,o){cc.loader.loadRes("prefabs/AlertUI2",function(s,r){var l=cc.instantiate(r);l.setPosition(cc.p(0,0)),l.tag=10003,null!==e.getChildByTag(10003)&&e.removeChildByTag(10003),e.addChild(l),l.getComponent("Alert").show2(t,i,n,a,c,o)})},ShowTips:function(e,t,i,n,a){cc.loader.loadRes("prefabs/TipsUI",function(i,c){var o=cc.instantiate(c);o.tag=10002,e.addChild(o),void 0===n&&void 0===a||o.setPosition(cc.p(n,a)),o.getComponent("Tips").show(t)}),null!=i&&void 0!=i||(i=3e3),setTimeout(function(){null!==e.getChildByTag(10002)&&e.removeChildByTag(10002)},i)},ShowLayer:function(e,t,i){cc.loader.loadRes("prefabs/"+e,function(n,a){var c=cc.instantiate(a);c.tag=10004,null!==t.getChildByTag(10004)&&t.removeChildByTag(10004),t.addChild(c),i&&c.getComponent(e)&&c.getComponent(e).init(i)})},ShowTime:function(e,t,i){null!==t.getChildByTag(10005)&&t.removeChildByTag(10005),cc.loader.loadRes("prefabs/"+e,function(n,a){var c=cc.instantiate(a);c.tag=10005,null!==t.getChildByTag(10005)&&t.removeChildByTag(10005),t.addChild(c),i&&c.getComponent(e)&&c.getComponent(e).init(i)})},ClearTime:function(e){null!==e.getChildByTag(10005)&&e.removeChildByTag(10005)},ShowAnimation:function(e,t,i,n){cc.loader.loadRes("prefabs/Animations",function(a,c){var o=cc.instantiate(c);t.addChild(o),void 0!==i&&(void 0!==i.posx&&void 0!==i.posy&&o.setPosition(cc.p(i.posx,i.posy)),void 0!==i.rotation&&(o.rotation=i.rotation),void 0!==i.scalex&&(o.scaleX=i.scalex));var s=o.getComponent("SpineAniCtrl");cc.loader.loadRes("animation/"+e,sp.SkeletonData,function(e,t){s.init(t,i,n)})})},ShowAniNui:function(e,t,i){cc.loader.loadRes("prefabs/Pokertype",function(n,a){var c=cc.instantiate(a);c.setPositionY(-20),t.addChild(c);var o=c.getComponent("PokerAct");c.getComponent(cc.Sprite);void 0!==i?c.setPosition(cc.p(110,135)):t.getPositionX()<0?c.setPosition(cc.p(26,-45)):c.setPosition(cc.p(0,-45)),cc.loader.loadRes("niuniu/bullfight_type"+e+".png",cc.SpriteFrame,function(e,t){o.init(t)})})},ShowScoreAni:function(e){var t=new cc.Node;t.tag=11001,t.addComponent("ScoreAni"),cc.director.getScene().addChild(t),t.getComponent("ScoreAni").show(e,t)}}),cc._RF.pop()},{}],UserMgr:[function(e,t,i){"use strict";cc._RF.push(t,"e9915y0tNZBhqvASxLrrpS2","UserMgr"),cc.Class({extends:cc.Component,properties:{account:null,userid:null,avatar:null,userName:null,roomid:null,ip:null,sign:0,isSitDown:!1},login:function(){cc.vv.socket.addHandler("welcome",function(e){var t=cc.args.roomNum;null==t&&(t=1),cc.vv.userMgr.enterRoom(t)}),cc.vv.socket.addHandler("joinRoom",function(e){"game12"==cc.director.getScene().name||"game6"==cc.director.getScene().name||"game9"==cc.director.getScene().name||cc.director.loadScene("game"+cc.args.ext_json.playerNum)}),cc.vv.socket.addHandler("joinRoom_error",function(e){cc.vv.uitools.ShowAlert(cc.director.getScene(),e,function(){cc.LOCALHOST?window.parent.location="/":cc.vv.hallSDK.goHall()},!1)});var e=this;cc.vv.http.sendRequest("/login",{account:e.account,gameId:cc.args.gameId,roomNum:cc.args.roomNum,sign:e.sign},function(e){if(0!==e.errcode);else{var t={ip:e.clientip,port:e.clientport};cc.vv.gameNetMgr.connectGameServer(t)}})},enterRoom:function(e){if(void 0==cc.args.ext){cc.args.ext=encodeURIComponent('{"niu7":"bei2","teshu":"dayu3","zhuangType":"turn","playType":"see","difen":"5","playerNum":"9"}')}void 0==cc.args.inningsNum&&(cc.args.inningsNum=4);var t=decodeURIComponent(cc.args.ext);cc.args.ext_json=JSON.parse(t),void 0==cc.args.ext_json.playerNum&&(cc.args.ext_json.playerNum=6),cc.director.preloadScene("game"+cc.args.ext_json.playerNum),Grobal.roomNum=e,cc.vv.gameNetMgr.onRoomJoin();var i={uid:Grobal.uid,userName:cc.args.userName,avatar:cc.args.avatar,roomNum:Grobal.roomNum,conf:cc.args.ext,inningsNum:cc.args.inningsNum};cc.vv.socket.send("joinRoom",i)}}),cc._RF.pop()},{}],Voice:[function(e,t,i){"use strict";cc._RF.push(t,"19a3dEguhlEr7Dn9K1ADshi","Voice"),cc.Class({extends:cc.Component,properties:{_emoji:null,_chatBubble:null,_voicemsg:null,_adj:null,_voicetime:0,_voicenum:3,_lastChatTime:-1},onLoad:function(){this.init()},init:function(){this._chatBubble=this.node.getChildByName("ChatBubble"),this._emoji=this.node.getChildByName("emoji"),this._voicemsg=this.node.getChildByName("voicemsg"),null!=this._voicemsg&&(this._adj=this._voicemsg.getChildByName("adj"),this._voicemsg.active=!1),this._chatBubble.active=!1,this._emoji.active=!1},voiceMsg:function(e){this._voicemsg&&(this._voicemsg.active=e,!0===e?(this._voicenum=3,this._voicetime=Date.now()):this._voicetime=0)},chat:function(e){null!=this._chatBubble&&null!=e&&(this._emoji.active=!1,this._chatBubble.active=!0,this._chatBubble.getChildByName("message").getComponent(cc.Label).string=e,this._chatBubble.getChildByName("chatbubble_bg").width=this._chatBubble.getChildByName("message").width+35,this._lastChatTime=3)},emoji:function(e){null!=this._emoji&&null!=e&&(this._chatBubble.active=!1,this._emoji.active=!0,this._emoji.getComponent(cc.Animation).play(e),this._lastChatTime=3)},update:function(e){if(this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this._chatBubble.active=!1,this._emoji.active=!1,this._emoji.getComponent(cc.Animation).stop())),null!=this._voicemsg&&!0===this._voicemsg.active&&Date.now()-this._voicetime>700&&this._voicetime>0){this._voicetime=Date.now();for(var t=0;t<this._adj.children.length;++t)this._adj.children[t].active=!1;this._adj.children[this._voicenum-1].active=!0,this._voicenum=this._voicenum-1,this._voicenum<=0&&(this._voicenum=3)}}}),cc._RF.pop()},{}],WaitingConnection:[function(e,t,i){"use strict";cc._RF.push(t,"deb5682vWtEWbM3tCfdfIxQ","WaitingConnection"),cc.Class({extends:cc.Component,properties:{target:cc.Node,_isShow:!1,lblContent:cc.Label},onLoad:function(){if(null==cc.vv)return null;cc.vv.wc=this,this.node.active=this._isShow},update:function(e){this.target.rotation=this.target.rotation-45*e},show:function(e){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==e&&(e=""),this.lblContent.string=e)},hide:function(){this._isShow=!1,this.node&&(this.node.active=this._isShow)}}),cc._RF.pop()},{}]},{},["Alert","Card","ClickAndRemove","GameFinishUI","PokerAct","Score","ScoreAni","Seat","SeatControl","SettingUI","Time","UI","Voice","WaitingConnection","Control","Game","GamePlay","Loading","AudioMgr","GameNetMgr","Root","UserMgr","Chat","ChatList","HTTP","Socket"]);