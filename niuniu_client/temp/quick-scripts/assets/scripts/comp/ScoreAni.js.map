{"version":3,"sources":["ScoreAni.js"],"names":["cc","Class","extends","Component","properties","_prefabs","_data","_parent","onLoad","show","data","parent","self","loader","loadRes","err","prefab","showOut","outArr","length","i","createSingle","sourcePos","vv","audioMgr","playSFX","setTimeout","showIn","inArr","removeFromParent","fromPos","tarPos","coin","instantiate","posx","x","posy","y","setPosition","p","actArr","Array","ac1","moveTo","call","callFunc","runAction","addChild"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAS,IADD;AAERC,eAAM,IAFE;AAGRC,iBAAQ;AAHA,KAHP;;AASLC,YAAQ,kBAAY,CAEnB,CAXI;;AAaLC,UAAM,cAAUC,IAAV,EAAeC,MAAf,EAAuB;AACzB,YAAIC,OAAO,IAAX;AACA,aAAKN,KAAL,GAAaI,IAAb;AACA,aAAKH,OAAL,GAAeI,MAAf;AACAX,WAAGa,MAAH,CAAUC,OAAV,CAAkB,cAAlB,EAAiC,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAChDJ,iBAAKP,QAAL,GAAgBW,MAAhB;AACAJ,iBAAKK,OAAL;AACJ,SAHD;AAIH,KArBI;;AAuBLA,aAAS,mBAAY;AACjB,YAAIL,OAAO,IAAX;AACA,YAAG,KAAKN,KAAL,CAAWY,MAAX,CAAkBC,MAAlB,GAA2B,CAA9B,EAAgC;AAC5B,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,KAAKd,KAAL,CAAWY,MAAX,CAAkBC,MAAhC,EAAuCC,GAAvC,EAA2C;AACvC,qBAAKC,YAAL,CAAkB,KAAKf,KAAL,CAAWY,MAAX,CAAkBE,CAAlB,CAAlB,EAAuC,KAAKd,KAAL,CAAWgB,SAAlD;AACH;AACDtB,eAAGuB,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,wBAAvB;AACAC,uBAAW,YAAW;AAClBd,qBAAKe,MAAL;AACH,aAFD,EAEG,IAFH;AAGH,SARD,MAQK;AACDf,iBAAKe,MAAL;AACH;AACJ,KApCI;;AAsCLA,YAAQ,kBAAY;AAChB,YAAIf,OAAO,IAAX;AACA,YAAG,KAAKN,KAAL,CAAWsB,KAAX,CAAiBT,MAAjB,GAA0B,CAA7B,EAA+B;AAC3B,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,KAAKd,KAAL,CAAWsB,KAAX,CAAiBT,MAA/B,EAAsCC,GAAtC,EAA0C;AACtC,qBAAKC,YAAL,CAAkB,KAAKf,KAAL,CAAWgB,SAA7B,EAAuC,KAAKhB,KAAL,CAAWsB,KAAX,CAAiBR,CAAjB,CAAvC;AACH;AACDpB,eAAGuB,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,wBAAvB;AACAC,uBAAW,YAAW;AAClBd,qBAAKL,OAAL,CAAasB,gBAAb;AACH,aAFD,EAEG,IAFH;AAGH,SARD,MAQK;AACDjB,iBAAKL,OAAL,CAAasB,gBAAb;AACH;AACJ,KAnDI;;AAqDLR,kBAAa,sBAASS,OAAT,EAAiBC,MAAjB,EAAwB;AACjC,aAAI,IAAIX,IAAE,CAAV,EAAYA,IAAE,CAAd,EAAgBA,GAAhB,EAAoB;AAChB,gBAAIY,OAAOhC,GAAGiC,WAAH,CAAe,KAAK5B,QAApB,CAAX;AACA,gBAAI6B,OAAOJ,QAAQK,CAAnB;AACA,gBAAIC,OAAON,QAAQO,CAAnB;AACAL,iBAAKM,WAAL,CAAiBtC,GAAGuC,CAAH,CAAKL,IAAL,EAAUE,IAAV,CAAjB;;AAEA,gBAAII,SAAS,IAAIC,KAAJ,EAAb;AACA,gBAAIC,MAAM1C,GAAG2C,MAAH,CAAU,CAAV,EAAYZ,MAAZ,CAAV;AACA,gBAAIa,OAAO5C,GAAG6C,QAAH,CAAY,YAAU;AAC7Bb,qBAAKH,gBAAL;AACH,aAFU,CAAX;AAGAG,iBAAKc,SAAL,CAAe9C,GAAG2C,MAAH,CAAU,MAAI,QAAMvB,IAAE,CAAR,CAAd,EAAyBW,MAAzB,CAAf;AACA,iBAAKxB,OAAL,CAAawC,QAAb,CAAsBf,IAAtB;AACH;AACJ;;AApEI,CAAT","file":"ScoreAni.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\comp","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _prefabs:null,\r\n        _data:null,\r\n        _parent:null,\r\n    },\r\n\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    show: function (data,parent) {\r\n        var self = this;\r\n        this._data = data;\r\n        this._parent = parent;\r\n        cc.loader.loadRes(\"prefabs/coin\",function(err,prefab){\r\n             self._prefabs = prefab;\r\n             self.showOut();\r\n        });\r\n    },\r\n\r\n    showOut: function () {\r\n        var self = this\r\n        if(this._data.outArr.length > 0){\r\n            for(var i=0;i<this._data.outArr.length;i++){\r\n                this.createSingle(this._data.outArr[i],this._data.sourcePos);\r\n            }\r\n            cc.vv.audioMgr.playSFX('effect/coin_income.mp3');\r\n            setTimeout(function() {\r\n                self.showIn()\r\n            }, 1500);\r\n        }else{\r\n            self.showIn()\r\n        }\r\n    },\r\n\r\n    showIn: function () {\r\n        var self = this\r\n        if(this._data.inArr.length > 0){\r\n            for(var i=0;i<this._data.inArr.length;i++){\r\n                this.createSingle(this._data.sourcePos,this._data.inArr[i]);\r\n            }\r\n            cc.vv.audioMgr.playSFX('effect/coin_income.mp3');\r\n            setTimeout(function() {\r\n                self._parent.removeFromParent();\r\n            }, 1500);\r\n        }else{\r\n            self._parent.removeFromParent();\r\n        }\r\n    },\r\n\r\n    createSingle:function(fromPos,tarPos){\r\n        for(var i=0;i<5;i++){\r\n            var coin = cc.instantiate(this._prefabs);\r\n            var posx = fromPos.x;\r\n            var posy = fromPos.y;\r\n            coin.setPosition(cc.p(posx,posy));\r\n\r\n            var actArr = new Array();\r\n            var ac1 = cc.moveTo(1,tarPos);\r\n            var call = cc.callFunc(function(){\r\n                coin.removeFromParent();\r\n            });\r\n            coin.runAction(cc.moveTo(0.1+0.15*(i+1),tarPos));\r\n            this._parent.addChild(coin);\r\n        }\r\n    }\r\n\r\n});\r\n"]}