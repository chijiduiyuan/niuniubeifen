{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\mgr/assets\\scripts\\mgr\\GameNetMgr.js"],"names":["window","Grobal","uid","socket","roomNum","allPokers","Array","selectPokers","isPass","isReady","status","isGrab","seatIndex","pokerSpriteFrameMap","dealInfo","roomUser","maxOfGame","numOfGame","startTime","roomStatus","reset","cc","Class","extends","Component","properties","dataEventHandler","readyCount","playerList","seats","chatVoices","dispatchEvent","event","data","emit","connectGameServer","self","vv","ip","port","onConnectOK","onConnectFail","connect","getLocalIndex","index","playerNum","args","ret","getSeatIndexByID","userid","i","length","s","getSeatNodeByUid","localIndex","gameNetMgr","getIsOpen","p","SetSeatInfo","doPlayVoice","onRoomJoin","addHandler","msg","userMgr","enterRoom","LOCALHOST","hallSDK","goHall","location","href","messagestr","messagestr2","userName","uitools","ShowAlert","director","getScene","login","isdeal_zhuan","info","zhuang","pokerList","splice","error","pokerPlayList","undefined","ClearTime","roomStage","passTime","stagetime","servertime","time","lasttime","ShowTime","x","getVisibleSize","width","y","eventName"],"mappings":"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","file":"GameNetMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\mgr","sourcesContent":["window.Grobal = {\r\n    uid: null,   //玩家ID\r\n    socket: null,\r\n    roomNum: 0,             //房号\r\n    allPokers: new Array(), //所有牌\r\n    selectPokers: new Array(),//选择的牌\r\n    isPass: false,          //是否点了不出\r\n    isReady:false,\r\n\tstatus:\"standup\",\r\n    isGrab:false,           //\r\n    seatIndex: -1,            // 当前玩家位置的序号 （0，1，2）\r\n    pokerSpriteFrameMap:null,\r\n\tdealInfo:null,\r\n    roomUser:null, //房主用户名\r\n    maxOfGame:0, //最大局数\r\n    numOfGame:0,\r\n    startTime:null, //房间创建时间\r\n    roomStatus:\"ready\",\r\n}\r\n\r\nGrobal.reset = function(){\r\n    Grobal.allPokers= new Array();\r\n    Grobal.selectPokers= new Array();\r\n    Grobal.isPass = false;\r\n    Grobal.isReady = false;\r\n\tGrobal.status = \"standup\";\r\n\tGrobal.dealInfo = null;\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        dataEventHandler:null,\r\n        readyCount:0,\r\n        playerList:new Array(),\r\n        seats:null,\r\n        chatVoices:null,\r\n    },\r\n\r\n    dispatchEvent(event,data){\r\n        if(this.dataEventHandler){\r\n            this.dataEventHandler.emit(event,data);\r\n        }    \r\n    },\r\n\r\n    connectGameServer:function(data){\r\n        var self = this;\r\n        cc.vv.socket.ip = data.ip + \":\" + data.port;\r\n        var onConnectOK = function(){\r\n        };\r\n        var onConnectFail = function(){\r\n\r\n        }\r\n        cc.vv.socket.connect(onConnectOK,onConnectFail);\r\n        Grobal.socket = cc.vv.socket;\r\n    },\r\n\r\n    getLocalIndex:function(index){\r\n        var playerNum = cc.args[\"ext_json\"]['playerNum']*1;\r\n        var ret = ( Grobal.seatIndex  + playerNum - index) % playerNum;\r\n        return ret;\r\n    },\r\n    getSeatIndexByID:function(userid){\r\n        for(var i=0;i<this.playerList.length;++i){\r\n            var s = this.playerList[i];\r\n            if(s !== null && s.uid == userid){\r\n                return i\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    getSeatNodeByUid:function(userid){\r\n        var localIndex = -1;\r\n        if(this.seats == null){\r\n            return localIndex;\r\n        }\r\n        var index = cc.vv.gameNetMgr.getSeatIndexByID(userid);\r\n        localIndex = cc.vv.gameNetMgr.getLocalIndex(index)\r\n        return localIndex\r\n    },\r\n\r\n\r\n    getIsOpen:function(){\r\n        for(var i=0;i<this.playerList.length;i++){\r\n            var p = this.playerList[i];\r\n            if(p.status!=\"standup\"&&p.status!=\"ready\"){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    SetSeatInfo:function(){\r\n        for(var i=0;i<this.playerList.length;++i){\r\n            var s = this.playerList[i];\r\n            if(s !== null && s.uid == Grobal.uid){\r\n                Grobal.seatIndex = i\r\n                Grobal.isReady = s.isReady;\r\n                Grobal.status = s.status;\r\n                Grobal.isGrab = s.isGrab\r\n            }\r\n        }\r\n    },\r\n\r\n    doPlayVoice:function(data){\r\n        this.dispatchEvent(\"voice_msg_owners\",data);\r\n    },\r\n\r\n    onRoomJoin:function(){\r\n        var self = this;\r\n        cc.vv.socket.addHandler('startagain_success', function(msg){\r\n            Grobal.status = \"standup\";\r\n            cc.vv.userMgr.enterRoom(Grobal.roomNum);\r\n        });\r\n        cc.vv.socket.addHandler('exit_success', function(msg){\r\n            if(!cc.LOCALHOST){\r\n                cc.vv.hallSDK.goHall();\r\n            }else{\r\n                window.location.href=\"/\";\r\n            }\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'room_player_changed', function(msg){\r\n            var messagestr=\"\";\r\n            var messagestr2=\"\";\r\n            for(var i=0;i<msg.length;++i){\r\n                var p = msg[i];\r\n                if(p.uid==Grobal.uid && p.status==\"ready\"){\r\n                    messagestr = \"你已准备\"\r\n                }else if(p.status==\"ready\"){\r\n                    if(messagestr2==\"\"){\r\n                        messagestr2 = \"已准备的用户有:\"+p.userName;\r\n                    }else{\r\n                        messagestr2 = messagestr2+\"、\"+p.userName;\r\n                    }\r\n                }\r\n            }\r\n            if(messagestr!=\"\"&&messagestr2==\"\"){\r\n                messagestr2 = \"还没有其他用户准备\";\r\n            }\r\n            if(messagestr!=\"\"){\r\n                //self.dispatchEvent('show_tips_message',messagestr);\r\n            }\r\n        });\r\n        cc.vv.socket.addHandler('room_dissolve', function(msg){\r\n            cc.vv.uitools.ShowAlert(cc.director.getScene(),\"房间已经被房主解散了\",function(){\r\n                 if(!cc.LOCALHOST){\r\n                    cc.vv.hallSDK.goHall();\r\n                }else{\r\n                    window.location.href=\"/\";\r\n                }\r\n            },false);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'joinRoom', function(msg){\r\n            cc.vv.gameNetMgr.playerList = msg.playerList;\r\n            Grobal.maxOfGame = msg.maxOfGame;\r\n            Grobal.startTime = msg.startTime;\r\n            Grobal.roomUser = msg.roomUser;\r\n            Grobal.numOfGame = msg.numOfGame;\r\n            cc.vv.gameNetMgr.SetSeatInfo();\r\n            self.dispatchEvent('new_user_comes_push');\r\n        });\r\n        cc.vv.socket.addHandler(Grobal.uid +'disconnect_server', function(msg){\r\n           cc.vv.userMgr.login();\r\n        });\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'startGame', function(msg){\r\n            Grobal.numOfGame = msg;\r\n        });\r\n        cc.vv.socket.addHandler('checkPlayerStatus_success', function(msg){\r\n            cc.vv.gameNetMgr.playerList = msg.playerList;\r\n            self.dispatchEvent('checkPlayerStatus_success');\r\n        });\r\n        \r\n        //抢庄的模式\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'startGrab', function(msg){\r\n            if(msg && msg.playerList){\r\n                cc.vv.gameNetMgr.playerList = msg.playerList;\r\n                cc.vv.gameNetMgr.SetSeatInfo();\r\n            }\r\n            self.dispatchEvent('start_qiang_zhuang');\r\n        });\r\n        //选择倍数\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'selectrate', function(msg){\r\n            if(msg && msg.playerList){\r\n                cc.vv.gameNetMgr.playerList = msg.playerList;\r\n                cc.vv.gameNetMgr.SetSeatInfo();\r\n            }\r\n            \r\n            if(msg && msg.isdeal_zhuan == true){\r\n            }else{\r\n                self.dispatchEvent('shezhi_beishu');\r\n            }\r\n        });\r\n        //用户状态更新，打牌，抢庄，倍数\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'play_state_change', function(msg){\r\n             self.dispatchEvent(\"play_state_change\",msg);\r\n        });\r\n        //通知用户看牌\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'kanpai_state_change', function(msg){\r\n             cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"点击牌面看牌\");\r\n        });\r\n        //显示信息\r\n        cc.vv.socket.addHandler('show_tips', function(msg){\r\n             cc.vv.gameNetMgr.dispatchEvent('show_tips_message',msg.info);\r\n        });\r\n        //房间状态更新\r\n        cc.vv.socket.addHandler(Grobal.roomNum +'state_changed', function(msg){\r\n            if(msg && msg.playerList){\r\n                cc.vv.gameNetMgr.playerList = msg.playerList;\r\n                cc.vv.gameNetMgr.SetSeatInfo();\r\n                self.dispatchEvent('user_state_changed');\r\n            }\r\n        });\r\n        cc.vv.socket.addHandler(\"voice_msg_push\",function(data){\r\n            self.dispatchEvent(\"voice_msg\",data);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(\"quick_chat_push\",function(data){\r\n            self.dispatchEvent(\"quick_chat_push\",data);\r\n        });\r\n        \r\n        cc.vv.socket.addHandler(\"emoji_push\",function(data){\r\n            self.dispatchEvent(\"emoji_push\",data);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum +\"deal_zhuang\",function(data){\r\n            if(data.zhuang == Grobal.uid){   \r\n                Grobal.isGrab = true\r\n            }else{\r\n                Grobal.isGrab = false;\r\n            }\r\n            //cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"等待系统决定庄家\");\r\n            self.dispatchEvent(\"deal_zhuang\",data);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.uid + 'dealingCards', function(msg){\r\n            Grobal.allPokers = msg.pokerList;\r\n            if(msg && msg.playerList){\r\n                cc.vv.gameNetMgr.playerList = msg.playerList;\r\n            }\r\n            self.dispatchEvent('user_state_dealingCards',msg);\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message');\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.uid + 'dealingTheFiveCards', function(msg){\r\n            Grobal.allPokers = msg.pokerList;\r\n            self.dispatchEvent('user_dealingTheFiveCards',msg);\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"请摊牌\");\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.uid + 'dealingTheFourCards', function(msg){\r\n            Grobal.allPokers = msg.pokerList;\r\n            self.dispatchEvent('user_dealingTheFourCards',msg);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'play', function(msg){\r\n           self.dispatchEvent('user_state_play',msg);\r\n        });\r\n        cc.vv.socket.addHandler('playError', function(msg){\r\n           cc.vv.uitools.ShowAlert(cc.director.getScene(),msg,function(){\r\n                \r\n            },false);\r\n        });\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'gameFinish', function(msg){\r\n            Grobal.allPokers.splice(0, Grobal.allPokers.length);\r\n            Grobal.selectPokers.splice(0, Grobal.selectPokers.length);\r\n            self.dispatchEvent('single_game_finish',msg);\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'playSuccess', function(msg){\r\n            if(msg.error !== 0){\r\n                Grobal.selectPokers = new Array();\r\n            }else{\r\n                if(msg.pokerPlayList!=null&&msg.pokerPlayList!=undefined){\r\n                    Grobal.selectPokers = msg.pokerPlayList;\r\n                }\r\n                self.dispatchEvent('card_playSuccess',msg);\r\n            }\r\n        });\r\n\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'ready_done', function(msg){\r\n            self.dispatchEvent('ready_done');\r\n            //cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"等待其他玩家准备\");\r\n        });\r\n\r\n        cc.vv.socket.addHandler('qiangzhuang_done', function(msg){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            Grobal.status = \"qianged\";\r\n            self.dispatchEvent('qiangzhuang_done');\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"等待其他玩家选择\");\r\n        });\r\n        cc.vv.socket.addHandler('dealbaserate_success', function(msg){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            Grobal.status = \"beishu\";\r\n            self.dispatchEvent('dealbaserate_success');\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"等待闲家下注\");\r\n        });\r\n        cc.vv.socket.addHandler('dealpoker_done', function(msg){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            Grobal.status = \"arranged\";\r\n            self.dispatchEvent('dealpoker_done');\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message',\"等待摊牌\");\r\n        });\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'game_score', function(msg){\r\n\t\t\tGrobal.dealInfo = msg;\r\n            self.dispatchEvent('card_start_play',msg);\r\n            cc.vv.gameNetMgr.dispatchEvent('show_tips_message');\r\n            cc.vv.uitools.ClearTime(cc.director.getScene());\r\n        });\r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'user_deal_poker_done', function(msg){\r\n            self.dispatchEvent('user_deal_poker_done',msg);\r\n            \r\n        });\r\n        cc.vv.socket.addHandler(Grobal.uid + '_user_deal_poker_done', function(msg){\r\n            self.dispatchEvent('user_deal_poker_done',msg);   \r\n        });\r\n        \r\n        cc.vv.socket.addHandler(Grobal.roomNum + 'room_time_update', function(msg){\r\n            var event = msg.roomStage + \"_event\";\r\n            var passTime = msg.stagetime - msg.servertime;\r\n            var time = msg.lasttime - passTime;\r\n            cc.vv.uitools.ShowTime(\"Time\",cc.director.getScene(),{time:time,x:cc.director.getVisibleSize().width/2,y:600,eventName:event});\r\n        });\r\n    },\r\n});"]}