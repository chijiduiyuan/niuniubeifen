{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\utils/assets\\scripts\\utils\\HTTP.js"],"names":["HTTP","cc","Class","extends","Component","statics","sessionId","userid","master_url","URL","url","sendRequest","path","data","handler","extUrl","xhr","loader","getXMLHttpRequest","timeout","str","k","requestURL","encodeURI","open","sys","isNative","setRequestHeader","onreadystatechange","readyState","status","ret","JSON","parse","responseText","e","send"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,GAAGC,KAAH,CAAS;AAChBC,aAASF,GAAGG,SADI;;AAGhBC,aAAQ;AACJC,mBAAU,CADN;AAEJC,gBAAO,CAFH;AAGJC,oBAAWC,GAHP;AAIJC,aAAID,GAJA;AAKJE,qBAAY,qBAASC,IAAT,EAAcC,IAAd,EAAmBC,OAAnB,EAA2BC,MAA3B,EAAkC;AAC1C,gBAAIC,MAAMf,GAAGgB,MAAH,CAAUC,iBAAV,EAAV;AACAF,gBAAIG,OAAJ,GAAc,IAAd;AACA,gBAAIC,MAAM,GAAV;AACA,iBAAI,IAAIC,CAAR,IAAaR,IAAb,EAAkB;AACd,oBAAIO,OAAO,GAAX,EAAe;AACXA,2BAAO,GAAP;AACH;AACDA,uBAAOC,IAAI,GAAJ,GAAUR,KAAKQ,CAAL,CAAjB;AACH;AACD,gBAAGN,UAAU,IAAb,EAAkB;AACdA,yBAASf,KAAKU,GAAd;AACH;AACD,gBAAIY,aAAaP,SAASH,IAAT,GAAgBW,UAAUH,GAAV,CAAjC;AACAJ,gBAAIQ,IAAJ,CAAS,KAAT,EAAeF,UAAf,EAA0B,IAA1B;AACA,gBAAIrB,GAAGwB,GAAH,CAAOC,QAAX,EAAoB;AAChBV,oBAAIW,gBAAJ,CAAqB,iBAArB,EAAuC,cAAvC,EAAsD,yBAAtD;AACH;AACDX,gBAAIY,kBAAJ,GAAyB,YAAU;AAC/B,oBAAIZ,IAAIa,UAAJ,KAAmB,CAAnB,IAAyBb,IAAIc,MAAJ,IAAc,GAAd,IAAqBd,IAAIc,MAAJ,GAAa,GAA/D,EAAoE;AAChE,wBAAG;AACC,4BAAIC,MAAMC,KAAKC,KAAL,CAAWjB,IAAIkB,YAAf,CAAV;AACA,4BAAGpB,YAAY,IAAf,EAAoB;AAChBA,oCAAQiB,GAAR;AACH;AACJ,qBALD,CAKC,OAAMI,CAAN,EAAQ,CACR,CAND,SAOO,CACN;AACJ;AACJ,aAZD;;AAcA,gBAAG,KAAH,EAAS,CACR;AACDnB,gBAAIoB,IAAJ;AACA,mBAAOpB,GAAP;AACH;AAzCG;AAHQ,CAAT,CAAX","file":"HTTP.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\utils","sourcesContent":["var HTTP = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics:{\r\n        sessionId:0,\r\n        userid:0,\r\n        master_url:URL,\r\n        url:URL,\r\n        sendRequest:function(path,data,handler,extUrl){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.timeout = 5000;\r\n            var str = \"?\";\r\n            for(var k in data){\r\n                if (str != \"?\"){\r\n                    str += \"&\";\r\n                }\r\n                str += k + \"=\" + data[k];\r\n            }\r\n            if(extUrl == null){\r\n                extUrl = HTTP.url;\r\n            }\r\n            var requestURL = extUrl + path + encodeURI(str);\r\n            xhr.open(\"GET\",requestURL,true);\r\n            if (cc.sys.isNative){\r\n                xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\",\"text/html;charset=UTF-8\");\r\n            }\r\n            xhr.onreadystatechange = function(){\r\n                if( xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)){\r\n                    try{\r\n                        var ret = JSON.parse(xhr.responseText);\r\n                        if(handler !== null){\r\n                            handler(ret)\r\n                        }\r\n                    }catch(e){\r\n                    }\r\n                    finally{\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(false){\r\n            }\r\n            xhr.send();\r\n            return xhr;\r\n        },\r\n    },\r\n});\r\n"]}