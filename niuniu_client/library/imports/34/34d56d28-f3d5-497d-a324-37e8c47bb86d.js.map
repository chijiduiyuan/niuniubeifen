{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\logic/assets\\scripts\\logic\\Control.js"],"names":["POSITION_UP","POSITION_DOWN","cc","Class","extends","Component","properties","pokerPrefab","default","type","Prefab","cardList","Node","qiangzhuan","qiangzhuan2","beishu","selectniu","_selectList","_pokerSpriteList","_pokerList","onLoad","vv","netRoot","on","msgBean","Grobal","status","active","nameList","i","btn","getChildByName","getComponent","Button","_updateState","node","isGrab","j","removeAllChildren","Array","reset","self","showQiangZhuan","args","playType","time","undefined","removeFromParent","showSelectNiu","displayAndClickPokers","pokerList","gap","pokerSprite","instantiate","setScale","poker","setPosition","pokerName","name","actArr","delay","delayTime","ac0","moveTo","p","ac1","scaleTo","call","callFunc","target","Sprite","spriteFrame","pokerSpriteFrameMap","ac2","push","addChild","length","runAction","sequence","EventType","TOUCH_START","fourPokerClick","lastPokerClick","audioMgr","playSFX","displayPokers","isNeedAction","pokerAction","moveBy","showPokerClick","event","socket","send","_getCardForTouch","touch","box","getBoundingBox","rectContainsPoint","isChiose","opacity","ChangePokerState","endCallback","touches","getTouches","touchLoc","getLocation","_touchEnd","convertToNodeSpace","y","index","k","selectPoker","splice","onHasNiuClick","onQiangClick","str","slice","parseInt","qiangzhuang","onBuqiangClick","sendRateClick","arr","rate","checkNiu","s","t","dict","dict2","than10","ci","value","si","num","point","exists","other"],"mappings":"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","file":"Control.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\logic","sourcesContent":["\r\n\r\nconst POSITION_UP = 1;\r\nconst POSITION_DOWN = 2;\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        pokerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        cardList:cc.Node,\r\n        qiangzhuan: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        qiangzhuan2: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        beishu: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        selectniu: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        _selectList: null,\r\n        _pokerSpriteList:null,\r\n        _pokerList:null,   \r\n    },\r\n\r\n    onLoad: function () {\r\n        cc.vv.netRoot.on('qiangzhuang_done',function(msgBean){\r\n            if(Grobal.status == \"standup\"){return}\r\n            this.qiangzhuan.active = false;\r\n            this.qiangzhuan2.active = false;\r\n            var nameList = [\"buqiang\",\"qiang1\",\"qiang2\",\"qiang4\"];\r\n            for(var i=0;i<4;i++){\r\n                var btn = this.qiangzhuan2.getChildByName(nameList[i]).getComponent(cc.Button);\r\n                btn._updateState(); \r\n            }\r\n        },this);\r\n        cc.vv.netRoot.on('dealbaserate_success',function(msgBean){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            this.beishu.active = false;\r\n        },this);\r\n        cc.vv.netRoot.on('dealpoker_done',function(msgBean){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            this.selectniu.active = false;\r\n            this.node.active = false;\r\n        },this);\r\n        cc.vv.netRoot.on('card_start_play',function(msgBean){\r\n            if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n            this.selectniu.active = false;\r\n            this.node.active = false;\r\n        },this);\r\n        cc.vv.netRoot.on('shezhi_beishu',function(msgBean){\r\n            if(Grobal.status == \"standup\" || Grobal.status == \"ready\"){return}\r\n\t\t\tthis.node.active =true;\r\n            if(Grobal.isGrab == true){\r\n                this.qiangzhuan.active = false;\r\n                this.qiangzhuan2.active = false;\r\n                this.beishu.active = false;\r\n                this.selectniu.active = false;\r\n            }else{\r\n                this.qiangzhuan.active = false;\r\n                this.qiangzhuan2.active = false;\r\n                this.beishu.active = true;\r\n                this.selectniu.active = false;\r\n            }\r\n            for(var j=0;j<10;j++){\r\n                if(this.beishu.getChildByName(\"multiple\"+j) !== null){\r\n                    var btn = this.beishu.getChildByName(\"multiple\"+j).getComponent(cc.Button);\r\n                    btn._updateState();\r\n                }\r\n            }\r\n        },this);\r\n        cc.vv.netRoot.on('game_restart_notice',function(msgBean){\r\n            this.qiangzhuan.active = false;\r\n            this.qiangzhuan2.active = false;\r\n            this.beishu.active = false;\r\n            this.selectniu.active = false;\r\n            this.cardList.removeAllChildren();\r\n            this._pokerSpriteList = new Array();\r\n            this._selectList = new Array();\r\n        },this);\r\n        this._selectList = new Array();\r\n    },\r\n    reset: function () {\r\n        var self = this;\r\n        self.cardList.removeAllChildren();\r\n        self._pokerSpriteList = new Array();\r\n        this._selectList = new Array();\r\n\t\tthis.selectniu.active = false;\r\n    },\r\n\r\n    showQiangZhuan: function () {\r\n        if(cc.args[\"ext_json\"].playType == \"see\"){\r\n            this.qiangzhuan.active = false;\r\n            this.qiangzhuan2.active = true;\r\n        }else if(cc.args[\"ext_json\"].playType == \"nor\"){\r\n            this.qiangzhuan.active = true;\r\n            this.qiangzhuan2.active = false;\r\n        }\r\n        this.beishu.active = false;\r\n        this.selectniu.active = false;\r\n        var time = this.node.getChildByName(\"Time\");\r\n\t\tif(time!=undefined&&time!=null){\r\n\t\t\ttime.removeFromParent();\r\n\t\t}\r\n    },\r\n    showSelectNiu: function () {\r\n        this.qiangzhuan.active = false;\r\n        this.qiangzhuan2.active = false;\r\n        this.beishu.active = false;\r\n        this.selectniu.active = true;\r\n    },\r\n\r\n    displayAndClickPokers: function(pokerList){\r\n        var self = this\r\n        self.cardList.removeAllChildren();\r\n        self._pokerSpriteList = new Array();\r\n        var gap = 85; //牌间隙\r\n        this._pokerList = pokerList;\r\n        for(var i = 0; i < 5; i++){\r\n            let pokerSprite = cc.instantiate(self.pokerPrefab);\r\n            pokerSprite.status = POSITION_DOWN;\r\n            pokerSprite.setScale(0.55);\r\n            var poker = pokerList[i];\r\n            pokerSprite.setPosition(320, 640);\r\n            let pokerName  = null\r\n            if(poker != undefined){\r\n                pokerName = poker.name; \r\n            }\r\n            var actArr = new Array();\r\n            var delay = cc.delayTime(0.05 + 0.05 * i);\r\n            if(cc.args[\"ext_json\"]['playerNum']==6) {\r\n                var ac0 = cc.moveTo(0.3,cc.p(150 + i*gap,290));\r\n            } else {\r\n                var ac0 = cc.moveTo(0.3,cc.p(220 + i*gap,180));\r\n            }\r\n            \r\n\r\n            var ac1 = cc.scaleTo(0.2,0,0.55);\r\n            var call = cc.callFunc(function(target){\r\n                if(target.poker !== null && target.poker !== undefined){\r\n                    target.getComponent(cc.Sprite).spriteFrame = Grobal.pokerSpriteFrameMap[target.poker.name];\r\n                }\r\n            });\r\n            var ac2 = cc.scaleTo(0.2,0.55,0.55);\r\n            actArr.push(delay);\r\n            actArr.push(ac0);\r\n            actArr.push(ac1);\r\n            actArr.push(call);\r\n            actArr.push(ac2);\r\n            this.cardList.addChild(pokerSprite);\r\n            self._pokerSpriteList.push(pokerSprite);\r\n\r\n            if(poker != undefined){\r\n                pokerSprite.poker = poker;\r\n                if(this._pokerList.length == 5){\r\n                    if(i< 3){\r\n                        pokerSprite.runAction(cc.sequence( actArr )); \r\n                    }else{\r\n                        if(i==3){\r\n                            pokerSprite.on(cc.Node.EventType.TOUCH_START, self.fourPokerClick, this);\r\n                        }else{\r\n                            pokerSprite.on(cc.Node.EventType.TOUCH_START, self.lastPokerClick, this);\r\n                        }\r\n                        var delay = cc.delayTime(0.05 + 0.05 * i);\r\n                        if(cc.args[\"ext_json\"]['playerNum']==6) {\r\n                            var ac0 = cc.moveTo(0.3,cc.p(150 + i*gap,290));\r\n                        } else {\r\n                            var ac0 = cc.moveTo(0.3,cc.p(220 + i*gap,180));\r\n                        }\r\n                        pokerSprite.runAction(cc.sequence( delay,ac0 ));\r\n                    }\r\n                }else{\r\n                      pokerSprite.runAction(cc.sequence( actArr )); \r\n                }\r\n            }else{\r\n                pokerSprite.poker = {};\r\n                var delay = cc.delayTime(0.05 + 0.05 * i);\r\n                if(cc.args[\"ext_json\"]['playerNum']==6) {\r\n                    var ac0 = cc.moveTo(0.3,cc.p(150 + i*gap,290));\r\n                } else {\r\n                    var ac0 = cc.moveTo(0.3,cc.p(220 + i*gap,180));\r\n                }\r\n                pokerSprite.runAction(cc.sequence( delay,ac0 ));\r\n                if(i==3){\r\n                    pokerSprite.on(cc.Node.EventType.TOUCH_START, self.fourPokerClick, this);\r\n                }else{\r\n                    pokerSprite.on(cc.Node.EventType.TOUCH_START, self.lastPokerClick, this);\r\n                }\r\n            }\r\n        }\r\n        cc.vv.audioMgr.playSFX('effect/poker_deal.mp3');\r\n    },\r\n\r\n\r\n    /**显示手中的牌 */\r\n    displayPokers: function(pokerList,isNeedAction){\r\n        var self = this\r\n        self.cardList.removeAllChildren();\r\n        self._pokerSpriteList = new Array();\r\n        var gap = 85; //牌间隙\r\n        this._pokerList = pokerList;\r\n        var pokerAction = 0;\r\n        for(var i = 0; i < 5; i++){\r\n            var poker = pokerList[i];\r\n            var pokerSprite = cc.instantiate(self.pokerPrefab);\r\n            pokerSprite.status = POSITION_DOWN;\r\n            pokerSprite.setScale(0.55);\r\n            if(poker != undefined){\r\n                var pokerName = poker.name;  \r\n                if(isNeedAction == false && i == (pokerList.length-1)){\r\n                    pokerAction = i;\r\n                }else{\r\n                    pokerSprite.getComponent(cc.Sprite).spriteFrame = Grobal.pokerSpriteFrameMap[pokerName];\r\n                }\r\n                pokerSprite.poker = poker;\r\n            }else{\r\n                pokerSprite.poker = {};\r\n                if(i==3){\r\n                    pokerSprite.on(cc.Node.EventType.TOUCH_START, self.fourPokerClick, this);\r\n                }else{\r\n                    pokerSprite.on(cc.Node.EventType.TOUCH_START, self.lastPokerClick, this);\r\n                }\r\n            }\r\n            if(isNeedAction == false){\r\n                if(cc.args[\"ext_json\"]['playerNum']==6){\r\n                    pokerSprite.setPosition(150 + i*gap, 290);\r\n                }else{\r\n                    pokerSprite.setPosition(220 + i*gap, 180);\r\n                }\r\n            }else{\r\n                if(cc.args[\"ext_json\"]['playerNum']==6){\r\n                    pokerSprite.setPosition(150, 290);\r\n                }else{\r\n                    pokerSprite.setPosition(200, 160);\r\n                }\r\n                if(i > 0){\r\n                    pokerSprite.runAction(cc.moveBy(0.5,cc.p(i*gap,0))) \r\n                }\r\n            }\r\n            this.cardList.addChild(pokerSprite);\r\n            self._pokerSpriteList.push(pokerSprite); \r\n        }\r\n        if(pokerAction!=0){\r\n            var pokerSprite = self._pokerSpriteList[pokerAction];\r\n            var actArr = new Array();\r\n            var ac1 = cc.scaleTo(0.2,0,0.55);\r\n            var call = cc.callFunc(function(){\r\n                pokerSprite.getComponent(cc.Sprite).spriteFrame = Grobal.pokerSpriteFrameMap[pokerName];\r\n            });\r\n            var ac2 = cc.scaleTo(0.2,0.55,0.55);\r\n            actArr.push(ac1);\r\n            actArr.push(call);\r\n            actArr.push(ac2);\r\n            pokerSprite.runAction(cc.sequence( actArr ));\r\n        }\r\n        cc.vv.audioMgr.playSFX('effect/poker_deal.mp3');\r\n    },\r\n\r\n\r\n\r\n    showPokerClick:function(event){\r\n        var poker = event.target;\r\n        var pokerName = event.target.poker.name;\r\n        var actArr = new Array();\r\n        var ac1 = cc.scaleTo(0.2,0,0.55);\r\n        var call = cc.callFunc(function(){\r\n            poker.getComponent(cc.Sprite).spriteFrame = Grobal.pokerSpriteFrameMap[pokerName];\r\n        });\r\n        var ac2 = cc.scaleTo(0.2,0.55,0.55);\r\n        actArr.push(ac1);\r\n        actArr.push(call);\r\n        actArr.push(ac2);\r\n        poker.runAction(cc.sequence( actArr ));\r\n        cc.vv.audioMgr.playSFX('effect/poker_click.mp3');\r\n    },\r\n\r\n    lastPokerClick:function(){\r\n        if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n        cc.vv.socket.send('showAllPokers');\r\n        cc.vv.audioMgr.playSFX('effect/poker_click.mp3');\r\n    },\r\n    fourPokerClick:function(){\r\n        if(Grobal.status == \"standup\" ||Grobal.status == \"ready\"){return}\r\n        cc.vv.socket.send('showFourPokers');\r\n        cc.vv.audioMgr.playSFX('effect/poker_click.mp3');\r\n    },\r\n    _getCardForTouch: function(touch){\r\n        var self = this\r\n        for(var i = self._pokerSpriteList.length - 1; i >= 0; i--){// 需要倒序\r\n            var pokerSprite = self._pokerSpriteList[i];\r\n            var box = pokerSprite.getBoundingBox();\r\n            if (cc.rectContainsPoint(box, touch)) {\r\n                pokerSprite.isChiose = true;\r\n                pokerSprite.opacity = 185;\r\n                this.ChangePokerState();\r\n                cc.vv.audioMgr.playSFX(\"effect/btn_click.mp3\");\r\n                return;//关键， 找到一个就返回\r\n            }\r\n        }\r\n    },\r\n    \r\n    //点击结束来，处理事件，选中牌，或者放下牌\r\n    endCallback: function endCallback(event) {\r\n        if(this._pokerSpriteList == null || this._pokerSpriteList.length < 5){return}\r\n        var touches = event.getTouches();\r\n        var touchLoc = touches[0].getLocation();\r\n        this._touchEnd = this.node.convertToNodeSpace(touchLoc);\r\n        this._getCardForTouch(this._touchEnd);\r\n    },\r\n\r\n    //把选中的牌，位置上挪，还有放入_selectList 数组\r\n    ChangePokerState:function(){\r\n        var self = this\r\n        for(var i = 0; i < this._pokerSpriteList.length; i++){\r\n            var pokerSprite = this._pokerSpriteList[i];\r\n            if (pokerSprite.isChiose) {\r\n                pokerSprite.isChiose = false;\r\n                pokerSprite.opacity = 255;\r\n                if(pokerSprite.status === POSITION_UP){\r\n                    pokerSprite.status = POSITION_DOWN;\r\n                    pokerSprite.y -= 20;\r\n\r\n                    var index = -1;\r\n                    for(var k in self._selectList){\r\n                       var selectPoker = self._selectList[k];\r\n                       if(selectPoker.name == pokerSprite.poker.name)\r\n                           index = k;\r\n                    }\r\n                    if(index != -1)\r\n                        self._selectList.splice(index, 1);\r\n                }else{\r\n                    if(self._selectList.length >= 3){\r\n                        return\r\n                    }\r\n                    pokerSprite.status = POSITION_UP;\r\n                    pokerSprite.y += 20;\r\n                    self._selectList.push(pokerSprite.poker)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n\r\n    onHasNiuClick:function(){\r\n        var self = this;\r\n        cc.vv.socket.send('dealpoker',\"\");\r\n    },\r\n\r\n    onQiangClick:function(event){\r\n        var str = event.target.name;\r\n        str = str.slice(-1);\r\n        var beishu = parseInt(str)\r\n        cc.vv.socket.send('qiangzhuang',{qiangzhuang:beishu});\r\n        \r\n    },\r\n    onBuqiangClick:function(){\r\n        cc.vv.socket.send('qiangzhuang',{qiangzhuang:0});\r\n    },\r\n    sendRateClick:function(event){\r\n        var index = event.target.name.slice(8);\r\n        var arr = [1,2,4,5,3,8];\r\n        cc.vv.socket.send('dealbaserate',{rate:arr[index]});\r\n        //cc.vv.audioMgr.playSFX('effect/compare_bet.mp3');\r\n    },\r\n\r\n    checkNiu:function(){\r\n        var self = this\r\n        var s = 0;\r\n        var t = 0;\r\n        var dict = {};\r\n        var dict2 = {};\r\n        var than10 = 0;\r\n        for (var i = 0; i < self._pokerList.length; i++) {\r\n            var ci = self._pokerList[i].value;\r\n            s += ci;\r\n            t += ci;\r\n            if(ci == 0){t += 10}\r\n            dict[ci] = dict[ci] === undefined ? 1 : dict[ci] + 1;\r\n            var si = self._pokerList[i].num;\r\n            dict2[si] = dict2[si] === undefined ? 1 : dict2[si] + 1;\r\n            if(self._pokerList[i].num > 10){\r\n                than10 = than10 + 1\r\n            }\r\n        };\r\n        var point = s % 10;\r\n        var exists = false;\r\n        for (var i in dict) {\r\n            var other = (10 + point - i) % 10;\r\n            if (dict[other]) {\r\n                if ((other == i && dict[other] >= 2) || (other!=i&&dict[other] >= 1)) {\r\n                    exists = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if(point == 0){point = 10};//牛牛\r\n        if(t <= 10){point = 13};\t//五小\r\n        for(var k in dict2 ){\r\n            if(dict2[k] >= 4 ){\r\n                point = 12;\t//炸弹\r\n            }\r\n        }\r\n        if(than10 == 5){\r\n            point = 11 //五花\r\n        }\r\n        return exists ? point : 0;\r\n    }\r\n\r\n\r\n});\r\n\r\n\r\n"]}